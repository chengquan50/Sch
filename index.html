<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>显示面板仿真服务调度系统</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- D3.js for DAG visualization -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <style>
        .sidebar {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding-top: 20px;
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 12px 20px;
            margin: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        .main-content {
            margin-left: 250px;
            min-height: 100vh;
            background: #f8f9fa;
        }
        
        .top-navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 30px;
            margin-bottom: 30px;
        }
        
        .content-wrapper {
            padding: 0 30px 30px;
        }
        
        .card {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: none;
            margin-bottom: 30px;
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .metric-card {
            text-align: center;
            padding: 20px;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .metric-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-running { background-color: #28a745; }
        .status-idle { background-color: #ffc107; }
        .status-error { background-color: #dc3545; }
        
        .resource-item {
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .resource-item:hover {
            background: #f8f9fa;
            border-color: #007bff;
        }
        
        .dag-container {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            background: white;
        }
        
        .gantt-container {
            height: 300px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            background: white;
            overflow-x: auto;
        }
        
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }
        
        .logo {
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            padding: 0 20px;
            margin-bottom: 30px;
            display: block;
        }
        
        .system-title {
            color: #333;
            font-weight: 600;
            margin: 0;
        }
        
        .user-info {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .avatar-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
            font-size: 1.5rem;
        }
        /* 通用标签页系统 - 确保只有一个标签面板显示 */
        .tab-system .tab-content .tab-pane {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
            height: 0 !important;
            overflow: hidden !important;
            position: absolute !important;
            left: -9999px !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .tab-system .tab-content .tab-pane.active.show {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
            height: auto !important;
            overflow: visible !important;
            position: relative !important;
            left: auto !important;
            margin: initial !important;
            padding: initial !important;
        }
        
        /* 确保Bootstrap的默认显示被覆盖 */
        #tasks-page .tab-pane:not(.active) {
            display: none !important;
        }

        /* RuleCard 样式 */
        .rule-card {
            border: 2px solid #e9ecef;
            border-radius: 12px;
            background: #ffffff;
            transition: all 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .rule-card:hover {
            border-color: #0d6efd;
            box-shadow: 0 4px 12px rgba(13, 110, 253, 0.15);
            transform: translateY(-2px);
        }


        .rule-card-header {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }


        .rule-name {
            margin: 0 0 0.5rem 0;
            font-weight: 600;
            color: #212529;
            font-size: 0.95rem;
            line-height: 1.3;
        }

        .rule-badges {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .rule-card-body {
            padding: 1rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .rule-params {
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 3px solid #6c757d;
        }

        .rule-params:hover::after {
            content: attr(title);
            position: absolute;
            background: #333;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            z-index: 1000;
            white-space: nowrap;
            top: 100%;
            left: 0;
            margin-top: 4px;
        }

        .params-display code {
            font-size: 0.7rem;
            color: #6f42c1;
            background: transparent;
            padding: 0;
        }

        .rule-summary {
            font-size: 0.85rem;
            color: #6c757d;
            margin-bottom: 1rem;
            flex-grow: 1;
            line-height: 1.4;
        }

        .rule-metrics {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.75rem;
        }

        .metric {
            flex: 1;
            text-align: center;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .metric-value {
            display: block;
            font-weight: 600;
            font-size: 0.9rem;
            color: #0d6efd;
        }

        .metric-label {
            display: block;
            font-size: 0.7rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }

        .training-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .rule-card-footer {
            padding: 1rem;
            border-top: 1px solid #e9ecef;
            background: #f8f9fa;
        }


        .rule-selector:checked ~ .form-check-label {
            font-weight: 600;
            color: #0d6efd;
        }

        /* 响应式栅格调整 */
        @media (max-width: 767.98px) {
            .rule-card {
                margin-bottom: 1rem;
            }
        }

        /* 选中的规则详细信息面板 */
        #selectedRuleDetails {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .selected-rule-info {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body>
    <!-- 侧边栏 -->
    <nav class="sidebar">
        <a href="#" class="logo">
            <i class="fas fa-cogs"></i> 调度仿真系统
        </a>
        
        <ul class="nav nav-pills flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#" onclick="showPage('dashboard-page')">
                    <i class="fas fa-tachometer-alt me-2"></i> 仪表盘
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('resources-page')">
                    <i class="fas fa-server me-2"></i> 资源管理
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('tasks-page')">
                    <i class="fas fa-tasks me-2"></i> 任务管理
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('rules-page')">
                    <i class="fas fa-cogs me-2"></i> 调度规则
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('config-page')">
                    <i class="fas fa-sliders-h me-2"></i> 仿真配置
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('simulation-page')">
                    <i class="fas fa-play-circle me-2"></i> 仿真运行
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('results-page')">
                    <i class="fas fa-chart-line me-2"></i> 结果统计
                </a>
            </li>
        </ul>
    </nav>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 顶部导航栏 -->
        <div class="top-navbar d-flex justify-content-between align-items-center">
            <h1 class="system-title">显示面板仿真服务调度系统</h1>
            <div class="user-info">
                <i class="fas fa-user-circle me-2"></i> 当前用户：Operator
                <span class="badge bg-primary ms-2">在线</span>
            </div>
        </div>

        <!-- 内容包装器 -->
        <div class="content-wrapper">
            <!-- 仪表盘页面 -->
            <div id="dashboard-page" class="page-content active">
                <h2 class="mb-4">系统概览</h2>
                
                <!-- 关键指标卡片 -->
                <div class="row mb-4">
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <i class="fas fa-server fa-2x text-primary mb-3"></i>
                                <div class="metric-value text-primary">76%</div>
                                <div class="metric-label">集群利用率</div>
                                <div class="progress mt-2">
                                    <div class="progress-bar bg-primary" style="width: 76%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <i class="fas fa-key fa-2x text-warning mb-3"></i>
                                <div class="metric-value text-warning">12/20</div>
                                <div class="metric-label">License 使用</div>
                                <div class="progress mt-2">
                                    <div class="progress-bar bg-warning" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <i class="fas fa-list fa-2x text-info mb-3"></i>
                                <div class="metric-value text-info">8</div>
                                <div class="metric-label">队列任务数</div>
                                <small class="text-muted">平均等待时间: 2.3min</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card metric-card">
                            <div class="card-body">
                                <i class="fas fa-play-circle fa-2x text-success mb-3"></i>
                                <div class="metric-value text-success">3</div>
                                <div class="metric-label">运行中批次</div>
                                <small class="text-muted">批次ID: B001, B003, B007</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统状态和趋势图表 -->
                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-chart-line me-2"></i>系统负载趋势
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="loadTrendChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-cogs me-2"></i>资源状态
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <span class="status-indicator status-running"></span>
                                            私有云节点
                                        </span>
                                        <strong>2/3</strong>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <span class="status-indicator status-running"></span>
                                            边缘计算节点
                                        </span>
                                        <strong>2/2</strong>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <span class="status-indicator status-idle"></span>
                                            IoT监测设备
                                        </span>
                                        <strong>2/2</strong>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>
                                            <span class="status-indicator status-error"></span>
                                            故障设备
                                        </span>
                                        <strong>2</strong>
                                    </div>
                                </div>
                                <canvas id="resourceDistributionChart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 最近活动和告警 -->
                <div class="row">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-history me-2"></i>最近活动
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <span class="badge bg-success">完成</span>
                                        <span class="ms-2">批次 B007 执行完成，耗时 12.3min</span>
                                        <small class="text-muted d-block">2分钟前</small>
                                    </div>
                                    <div class="timeline-item mt-3">
                                        <span class="badge bg-primary">启动</span>
                                        <span class="ms-2">DRL策略训练开始，场景: 显示面板-高负载</span>
                                        <small class="text-muted d-block">5分钟前</small>
                                    </div>
                                    <div class="timeline-item mt-3">
                                        <span class="badge bg-warning">告警</span>
                                        <span class="ms-2">边缘节点 Edge-03 CPU使用率超过85%</span>
                                        <small class="text-muted d-block">8分钟前</small>
                                    </div>
                                    <div class="timeline-item mt-3">
                                        <span class="badge bg-info">调度</span>
                                        <span class="ms-2">使用FIFO策略调度任务组 TG-145</span>
                                        <small class="text-muted d-block">12分钟前</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-exclamation-triangle me-2"></i>系统告警
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning d-flex align-items-center" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2"></i>
                                    <div>
                                        <strong>Fluent License 使用率告警</strong><br>
                                        当前 Fluent License 使用率 75%，接近阈值
                                    </div>
                                </div>
                                <div class="alert alert-info d-flex align-items-center" role="alert">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <div>
                                        <strong>队列积压提醒</strong><br>
                                        任务队列中有 8 个待处理任务
                                    </div>
                                </div>
                                <div class="alert alert-danger d-flex align-items-center" role="alert">
                                    <i class="fas fa-times-circle me-2"></i>
                                    <div>
                                        <strong>设备故障</strong><br>
                                        IoT设备 IoT-27, IoT-33 离线超过10分钟
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 资源管理页面 -->
            <div id="resources-page" class="page-content">
                <h2 class="mb-4">资源管理</h2>
                
                <!-- 资源类型标签页 -->
                <div class="tab-system">
                    <ul class="nav nav-tabs mb-4" id="resourceTabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#resource-overview">
                            <i class="fas fa-chart-pie me-2"></i>资源概览
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#compute-nodes">
                            <i class="fas fa-server me-2"></i>计算节点
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#iot-devices">
                            <i class="fas fa-microchip me-2"></i>IoT设备
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#licenses">
                            <i class="fas fa-key me-2"></i>License管理
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#experts">
                            <i class="fas fa-users me-2"></i>专家资源
                        </a>
                    </li>
                </ul>
                
                <div class="tab-content">
                    <!-- 资源概览标签页 -->
                    <div class="tab-pane fade show active" id="resource-overview">
                        <div class="row">
                            <!-- 计算节点概览 -->
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0"><i class="fas fa-server me-2"></i>计算节点概览</h5>
                                        <small class="text-muted">总计: 11个节点</small>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="metric-card bg-light rounded p-3 text-center">
                                                    <div class="metric-value text-primary">1</div>
                                                    <div class="metric-label">云节点</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="metric-card bg-light rounded p-3 text-center">
                                                    <div class="metric-value text-success">10</div>
                                                    <div class="metric-label">边缘节点</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <small class="text-muted">总CPU核心: 176核 | 总内存: 1408GB</small>
                                        </div>
                                        <div class="progress mt-2">
                                            <div class="progress-bar bg-success" style="width: 60%"></div>
                                        </div>
                                        <small class="text-muted">平均利用率: 60%</small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- IoT设备概览 -->
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0"><i class="fas fa-microchip me-2"></i>IoT设备概览</h5>
                                        <small class="text-muted">总计: 40个设备</small>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-info" style="font-size: 1.5rem;">10</div>
                                                    <div class="metric-label small">阵列-ITO</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-warning" style="font-size: 1.5rem;">6</div>
                                                    <div class="metric-label small">阵列-光刻</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-primary" style="font-size: 1.5rem;">8</div>
                                                    <div class="metric-label small">阵列-PI</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row mt-2">
                                            <div class="col-6">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-success" style="font-size: 1.5rem;">8</div>
                                                    <div class="metric-label small">贴合-封装</div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-secondary" style="font-size: 1.5rem;">8</div>
                                                    <div class="metric-label small">模组-AOI</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <span class="badge bg-success me-1">40在线</span>
                                            <span class="badge bg-secondary">0离线</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- License管理概览 -->
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0"><i class="fas fa-key me-2"></i>License使用概览</h5>
                                        <small class="text-muted">总计: 10种软件</small>
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-3">
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-primary" style="font-size: 1.5rem;">33</div>
                                                    <div class="metric-label small">总License数</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-warning" style="font-size: 1.5rem;">12</div>
                                                    <div class="metric-label small">使用中</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-success" style="font-size: 1.5rem;">21</div>
                                                    <div class="metric-label small">空闲</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="progress mb-2">
                                            <div class="progress-bar bg-warning" style="width: 36%"></div>
                                        </div>
                                        <small class="text-muted">整体使用率: 36%</small>
                                        <div class="mt-2">
                                            <small class="text-danger">⚠ 3个软件即将到期</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 专家资源概览 -->
                            <div class="col-lg-6 mb-4">
                                <div class="card">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0"><i class="fas fa-users me-2"></i>专家资源概览</h5>
                                        <small class="text-muted">总计: 10位专家</small>
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-3">
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-success" style="font-size: 1.5rem;">5</div>
                                                    <div class="metric-label small">Senior</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-primary" style="font-size: 1.5rem;">3</div>
                                                    <div class="metric-label small">Intermediate</div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="metric-card bg-light rounded p-2 text-center">
                                                    <div class="metric-value text-secondary" style="font-size: 1.5rem;">2</div>
                                                    <div class="metric-label small">Junior</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6">
                                                <span class="badge bg-success me-1">6 空闲</span>
                                            </div>
                                            <div class="col-6">
                                                <span class="badge bg-warning">4 忙碌</span>
                                            </div>
                                        </div>
                                        <div class="mt-2">
                                            <small class="text-muted">涵盖CFD、FEM、热分析、电磁、光学、TCAD等领域</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 快速操作区域 -->
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"><i class="fas fa-bolt me-2"></i>快速操作</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-lg-3 col-md-6 mb-2">
                                                <button class="btn btn-outline-primary btn-sm w-100">
                                                    <i class="fas fa-plus me-1"></i>添加计算节点
                                                </button>
                                            </div>
                                            <div class="col-lg-3 col-md-6 mb-2">
                                                <button class="btn btn-outline-success btn-sm w-100">
                                                    <i class="fas fa-wifi me-1"></i>注册IoT设备
                                                </button>
                                            </div>
                                            <div class="col-lg-3 col-md-6 mb-2">
                                                <button class="btn btn-outline-warning btn-sm w-100">
                                                    <i class="fas fa-key me-1"></i>导入License
                                                </button>
                                            </div>
                                            <div class="col-lg-3 col-md-6 mb-2">
                                                <button class="btn btn-outline-info btn-sm w-100">
                                                    <i class="fas fa-user-plus me-1"></i>添加专家
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 计算节点标签页 -->
                    <div class="tab-pane fade" id="compute-nodes">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">计算节点列表</h5>
                                <button class="btn btn-primary btn-sm">
                                    <i class="fas fa-plus me-2"></i>添加节点
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <!-- cloud节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    cloud (云节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 48核</div>
                                                <div class="col-6">内存: 512.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 4.5GHz</div>
                                                <div class="col-6">功耗: 0.45~5.625kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge1节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge1 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 2.4GHz</div>
                                                <div class="col-6">功耗: 0.06~0.75kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge2节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge2 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 8核</div>
                                                <div class="col-6">内存: 64.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 3.3GHz</div>
                                                <div class="col-6">功耗: 0.055~0.6875kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge3节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge3 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 2.4GHz</div>
                                                <div class="col-6">功耗: 0.06~0.75kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge4节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge4 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 3.7GHz</div>
                                                <div class="col-6">功耗: 0.0925~1.156kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge5节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge5 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 16核</div>
                                                <div class="col-6">内存: 64.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 3.4GHz</div>
                                                <div class="col-6">功耗: 0.113~1.417kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge6节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge6 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 2.4GHz</div>
                                                <div class="col-6">功耗: 0.06~0.75kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge7节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge7 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 16核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 3.7GHz</div>
                                                <div class="col-6">功耗: 0.123~1.542kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge8节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge8 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 64.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 2.4GHz</div>
                                                <div class="col-6">功耗: 0.04~0.5kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge9节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge9 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 16核</div>
                                                <div class="col-6">内存: 128.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 2.4GHz</div>
                                                <div class="col-6">功耗: 0.08~1.0kW</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- edge10节点 -->
                                    <div class="col-lg-6 mb-3">
                                        <div class="resource-item">
                                            <div class="d-flex justify-content-between align-items-center mb-2">
                                                <h6 class="mb-0">
                                                    <span class="status-indicator status-running"></span>
                                                    edge10 (边缘节点)
                                                </h6>
                                                <span class="badge bg-success">运行中</span>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">CPU: 12核</div>
                                                <div class="col-6">内存: 64.0GB</div>
                                            </div>
                                            <div class="row text-muted small">
                                                <div class="col-6">频率: 3.7GHz</div>
                                                <div class="col-6">功耗: 0.0925~1.156kW</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- IoT设备标签页 -->
                    <div class="tab-pane fade" id="iot-devices">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">IoT设备管理</h5>
                                <button class="btn btn-primary btn-sm">
                                    <i class="fas fa-plus me-2"></i>注册设备
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>设备ID</th>
                                                <th>设备名称</th>
                                                <th>车间位置</th>
                                                <th>状态</th>
                                                <th>候选边缘节点</th>
                                                <th>传输功率分布</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>
                                                    <i class="fas fa-microchip me-2"></i>Array-ITO-ITO-AOI-06
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge2,edge1,edge3</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>
                                                    <i class="fas fa-search me-2"></i>Array-ITO-ITO-Ellipsometer-02
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge1,edge3,edge2</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>
                                                    <i class="fas fa-cogs me-2"></i>Array-ITO-ITO-MFC-03
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge1,edge3,edge2</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>4</td>
                                                <td>
                                                    <i class="fas fa-thermometer-half me-2"></i>Array-ITO-ITO-Pyrometer-05
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge1,edge3,edge2</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>5</td>
                                                <td>
                                                    <i class="fas fa-gauge me-2"></i>Array-ITO-ITO-QCM-01
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge3,edge1,edge2</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>6</td>
                                                <td>
                                                    <i class="fas fa-valve me-2"></i>Array-ITO-ITO-VacuumGauge-04
                                                </td>
                                                <td>阵列-ITO车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge1,edge2,edge3</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>7</td>
                                                <td>
                                                    <i class="fas fa-microscope me-2"></i>Array-Litho-Litho-CD-SEM-02
                                                </td>
                                                <td>阵列-光刻车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge2,edge5</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>8</td>
                                                <td>
                                                    <i class="fas fa-layer-group me-2"></i>Array-Litho-Litho-CoaterSensor-03
                                                </td>
                                                <td>阵列-光刻车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge2,edge5</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>9</td>
                                                <td>
                                                    <i class="fas fa-ruler me-2"></i>Array-Litho-Litho-StepperMetrology-01
                                                </td>
                                                <td>阵列-光刻车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge5,edge2</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>10</td>
                                                <td>
                                                    <i class="fas fa-temperature-high me-2"></i>Array-PI-PI-BakeTemp-02
                                                </td>
                                                <td>阵列-PI车间</td>
                                                <td><span class="badge bg-success">在线</span></td>
                                                <td>edge4,edge3</td>
                                                <td>uniform[27.0,30.0]</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-cog"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- License管理标签页 -->
                    <div class="tab-pane fade" id="licenses">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">License使用情况</h5>
                                <button class="btn btn-primary btn-sm">
                                    <i class="fas fa-plus me-2"></i>添加License
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-desktop fa-2x text-primary mb-3"></i>
                                                <h6>Ansys Workbench</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-primary" style="width: 60%"></div>
                                                </div>
                                                <p class="mb-1"><strong>3/5</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2024-12-31</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-atom fa-2x text-success mb-3"></i>
                                                <h6>COMSOL Multiphysics</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-success" style="width: 33%"></div>
                                                </div>
                                                <p class="mb-1"><strong>1/3</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-06-15</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-wind fa-2x text-warning mb-3"></i>
                                                <h6>Fluent CFD</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-warning" style="width: 75%"></div>
                                                </div>
                                                <p class="mb-1"><strong>3/4</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2024-11-30</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-microchip fa-2x text-info mb-3"></i>
                                                <h6>Silvaco ATLAS TCAD</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-info" style="width: 0%"></div>
                                                </div>
                                                <p class="mb-1"><strong>0/3</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-10-01</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-layer-group fa-2x text-secondary mb-3"></i>
                                                <h6>Lumerical STACK</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-secondary" style="width: 33%"></div>
                                                </div>
                                                <p class="mb-1"><strong>2/6</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-07-31</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-broadcast-tower fa-2x text-dark mb-3"></i>
                                                <h6>CST Studio Suite</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-dark" style="width: 0%"></div>
                                                </div>
                                                <p class="mb-1"><strong>0/2</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-03-01</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-cube fa-2x text-primary mb-3"></i>
                                                <h6>Coventor SEMulator3D</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-primary" style="width: 50%"></div>
                                                </div>
                                                <p class="mb-1"><strong>1/2</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-04-15</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-cogs fa-2x text-success mb-3"></i>
                                                <h6>Sentaurus Process</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-success" style="width: 25%"></div>
                                                </div>
                                                <p class="mb-1"><strong>1/4</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2024-12-20</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-memory fa-2x text-warning mb-3"></i>
                                                <h6>ProPlus Memory Modeler</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-warning" style="width: 0%"></div>
                                                </div>
                                                <p class="mb-1"><strong>0/1</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-01-10</small>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card bg-light">
                                            <div class="card-body text-center">
                                                <i class="fas fa-project-diagram fa-2x text-info mb-3"></i>
                                                <h6>Simulia Abaqus</h6>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar bg-info" style="width: 33%"></div>
                                                </div>
                                                <p class="mb-1"><strong>1/3</strong> 个License使用中</p>
                                                <small class="text-muted">到期时间: 2025-05-05</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">License使用历史</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>软件</th>
                                                <th>用户</th>
                                                <th>开始时间</th>
                                                <th>结束时间</th>
                                                <th>使用时长</th>
                                                <th>状态</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Ansys Workbench</td>
                                                <td>panel-batch-cfd-001-s2</td>
                                                <td>15:20:15</td>
                                                <td>15:32:48</td>
                                                <td>12分33秒</td>
                                                <td><span class="badge bg-success">已释放</span></td>
                                            </tr>
                                            <tr>
                                                <td>Fluent CFD</td>
                                                <td>panel-batch-cfd-001-s3</td>
                                                <td>15:18:30</td>
                                                <td>--</td>
                                                <td>运行中</td>
                                                <td><span class="badge bg-primary">使用中</span></td>
                                            </tr>
                                            <tr>
                                                <td>COMSOL Multiphysics</td>
                                                <td>thermal-analysis-batch-s4</td>
                                                <td>14:55:20</td>
                                                <td>15:18:15</td>
                                                <td>22分55秒</td>
                                                <td><span class="badge bg-success">已释放</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 专家资源标签页 -->
                    <div class="tab-pane fade" id="experts">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">专家资源管理</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Dr. Liu (刘博士)</h6>
                                                <p class="text-muted small">CFD仿真专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-success ms-1">Senior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">CFD流体仿真</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-warning ms-1">忙碌</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Ms. Zhao (赵工程师)</h6>
                                                <p class="text-muted small">FEM结构专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-primary ms-1">Intermediate</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">FEM有限元分析</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-secondary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Mr. Sun (孙工程师)</h6>
                                                <p class="text-muted small">热分析专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-secondary ms-1">Junior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">Thermal热分析</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Dr. He (何博士)</h6>
                                                <p class="text-muted small">电磁兼容专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-success ms-1">Senior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">EMC电磁仿真</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-warning ms-1">忙碌</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Mr. Wang (王工程师)</h6>
                                                <p class="text-muted small">薄膜光学专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-primary ms-1">Intermediate</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">薄膜色度光谱</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Ms. Li (李博士)</h6>
                                                <p class="text-muted small">等离子体建模专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-success ms-1">Senior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">Plasma溅射建模</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Mr. Zhang (张博士)</h6>
                                                <p class="text-muted small">TCAD专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-success ms-1">Senior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">TFT器件仿真</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-warning ms-1">忙碌</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Ms. Chen (陈工程师)</h6>
                                                <p class="text-muted small">配向膜专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-primary ms-1">Intermediate</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">配向/摩擦建模</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-primary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Dr. Gao (高博士)</h6>
                                                <p class="text-muted small">热-流-结构耦合专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-success ms-1">Senior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">多物理场耦合</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-success ms-1">空闲</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card">
                                            <div class="card-body text-center">
                                                <div class="avatar-circle bg-secondary text-white mb-3">
                                                    <i class="fas fa-user"></i>
                                                </div>
                                                <h6>Ms. Yang (杨工程师)</h6>
                                                <p class="text-muted small">工艺仿真专家</p>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业级别:</small>
                                                    <span class="badge bg-secondary ms-1">Junior</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">专业领域:</small>
                                                    <span class="badge bg-info ms-1">显示制造工艺流程</span>
                                                </div>
                                                <div class="mb-2">
                                                    <small class="text-muted">当前状态:</small>
                                                    <span class="badge bg-warning ms-1">忙碌</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div> <!-- tab-system -->
            </div>

            <!-- 任务管理页面 -->
            <div id="tasks-page" class="page-content">
                <h2 class="mb-4">任务管理</h2>
                
                <!-- 任务管理标签页 -->
                <div class="tab-system">
                    <ul class="nav nav-tabs mb-4" id="taskTabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="tab" href="#historical-tasks">
                            <i class="fas fa-history me-2"></i>历史任务
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#historical-batches">
                            <i class="fas fa-archive me-2"></i>历史批次
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#target-tasks">
                            <i class="fas fa-bullseye me-2"></i>目标任务
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="tab" href="#target-batches">
                            <i class="fas fa-layer-group me-2"></i>目标批次
                        </a>
                    </li>
                </ul>
                
                <div class="tab-content">
                    <!-- 历史任务标签页 -->
                    <div class="tab-pane fade show active" id="historical-tasks">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">历史任务</h5>
                                <div>
                                    <button class="btn btn-outline-primary btn-sm me-2">
                                        <i class="fas fa-search me-2"></i>搜索
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-download me-2"></i>导出
                                    </button>
                                </div>
                            </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>任务ID</th>
                                                        <th>任务名称</th>
                                                        <th>产品</th>
                                                        <th>车间</th>
                                                        <th>工艺窗口</th>
                                                        <th>子任务数</th>
                                                        <th>状态</th>
                                                        <th>归档时间</th>
                                                        <th>操作</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td><code>lcd-ito-window-202408-001</code></td>
                                                        <td>LCD ITO溅射+退火工艺窗口优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>阵列-ITO</td>
                                                        <td>功率/压力/O₂:Ar/退火温度</td>
                                                        <td>34</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-23 14:20:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('lcd-ito-window-202408-001', 101)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>lcd-pi-bake-202408-002</code></td>
                                                        <td>LCD PI配向膜涂布+烘烤曲线优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>阵列-PI</td>
                                                        <td>旋涂转速/黏度/烘烤温度-时间</td>
                                                        <td>27</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-22 16:05:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('lcd-pi-bake-202408-002', 102)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>lcd-litho-resist-202408-003</code></td>
                                                        <td>LCD 光刻胶显影/曝光工艺窗口优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>阵列-光刻</td>
                                                        <td>曝光能量/显影时间/后烘温度</td>
                                                        <td>41</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-21 18:30:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('lcd-litho-resist-202408-003', 103)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>cell-align-pretilt-202408-004</code></td>
                                                        <td>Cell 取向-预倾角窗口优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>贴合-封装</td>
                                                        <td>摩擦压力/速度/UV能量/配向治具间隙</td>
                                                        <td>25</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-20 10:00:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('cell-align-pretilt-202408-004', 104)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>seal-uv-cure-202408-005</code></td>
                                                        <td>Cell 密封胶UV固化参数优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>贴合-封装</td>
                                                        <td>UV强度/固化时间/配方比</td>
                                                        <td>22</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-19 15:40:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('seal-uv-cure-202408-005', 105)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>module-aoi-tuning-202408-006</code></td>
                                                        <td>模组AOI参数与缺陷阈值优化</td>
                                                        <td><span class="badge bg-primary">LCD</span></td>
                                                        <td>模组-AOI</td>
                                                        <td>曝光/增益/阈值/光源角度</td>
                                                        <td>24</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-18 09:20:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('module-aoi-tuning-202408-006', 106)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>led-mocvd-gan-202408-007</code></td>
                                                        <td>LED MOCVD GaN外延生长窗口优化</td>
                                                        <td><span class="badge bg-warning">LED</span></td>
                                                        <td>外延-MOCVD</td>
                                                        <td>温度/III-V流量/腔压/载气比例</td>
                                                        <td>38</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-17 11:00:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('led-mocvd-gan-202408-007', 107)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>mini-led-reflow-202408-008</code></td>
                                                        <td>MiniLED 回流焊曲线与空洞率优化</td>
                                                        <td><span class="badge bg-warning">LED</span></td>
                                                        <td>SMT-封装</td>
                                                        <td>预热/回流峰值/保温时间/冷却速率</td>
                                                        <td>32</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-16 17:25:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('mini-led-reflow-202408-008', 108)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>led-phosphor-mix-202408-009</code></td>
                                                        <td>LED 荧光粉配比与涂覆厚度优化</td>
                                                        <td><span class="badge bg-warning">LED</span></td>
                                                        <td>封装-荧光粉</td>
                                                        <td>粒径/配比/涂层厚度/固化温度</td>
                                                        <td>29</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-15 13:10:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('led-phosphor-mix-202408-009', 109)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td><code>led-wirebond-202408-010</code></td>
                                                        <td>LED 金线键合参数窗口优化</td>
                                                        <td><span class="badge bg-warning">LED</span></td>
                                                        <td>封装-键合</td>
                                                        <td>压力/超声功率/时间/楔形高度</td>
                                                        <td>45</td>
                                                        <td><span class="badge bg-success">完成</span></td>
                                                        <td>2024-08-14 16:55:00</td>
                                                        <td>
                                                            <button class="btn btn-sm btn-outline-primary" onclick="showDAG('led-wirebond-202408-010', 110)">
                                                                <i class="fas fa-eye"></i> 查看
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 历史批次标签页 -->
                    <div class="tab-pane fade" id="historical-batches">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">历史任务批次</h5>
                                <div>
                                    <button class="btn btn-outline-primary btn-sm me-2">
                                        <i class="fas fa-search me-2"></i>搜索
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm">
                                        <i class="fas fa-download me-2"></i>导出
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>批次编号</th>
                                                <th>批次任务数</th>
                                                <th>完成状态</th>
                                                <th>归档时间</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>hist-batch-202408-A</code></td>
                                                <td>10</td>
                                                <td><span class="badge bg-success">全部完成</span></td>
                                                <td>2024-08-24 18:00:00</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-eye"></i> 查看详情
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary ms-1">
                                                        <i class="fas fa-download"></i> 下载报告
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 目标任务标签页 -->
                    <div class="tab-pane fade" id="target-tasks">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">目标任务池</h5>
                                <div>
                                    <button class="btn btn-primary btn-sm me-2">
                                        <i class="fas fa-plus me-2"></i>创建任务
                                    </button>
                                    <button class="btn btn-outline-success btn-sm">
                                        <i class="fas fa-upload me-2"></i>导入模板
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="row align-items-stretch">
                                    <div class="col-lg-6 mb-3 d-flex">
                                        <div class="card border-primary h-100 w-100">
                                            <div class="card-header bg-light">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">LCD ITO工艺窗口目标任务</h6>
                                                    <span class="badge bg-primary">LCD</span>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <p class="text-muted small mb-2">
                                                    <strong>模板:</strong> ITO溅射+退火
                                                </p>
                                                <p class="text-muted small mb-2">
                                                    <strong>建议子任务数:</strong> 36个
                                                </p>
                                                <p class="text-muted small mb-3">
                                                    <strong>任务ID:</strong> <code>target-lcd-ito-001</code>
                                                </p>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="showDAG('target-lcd-ito-001', 201)">
                                                        <i class="fas fa-eye me-1"></i>预览DAG
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>创建任务
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-6 mb-3 d-flex">
                                        <div class="card border-primary h-100 w-100">
                                            <div class="card-header bg-light">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">LCD PI烘烤曲线目标任务</h6>
                                                    <span class="badge bg-primary">LCD</span>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <p class="text-muted small mb-2">
                                                    <strong>模板:</strong> PI旋涂+烘烤
                                                </p>
                                                <p class="text-muted small mb-2">
                                                    <strong>建议子任务数:</strong> 28个
                                                </p>
                                                <p class="text-muted small mb-3">
                                                    <strong>任务ID:</strong> <code>target-lcd-pi-002</code>
                                                </p>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="showDAG('target-lcd-pi-002', 202)">
                                                        <i class="fas fa-eye me-1"></i>预览DAG
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>创建任务
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-6 mb-3">
                                        <div class="card border-warning">
                                            <div class="card-header bg-light">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">LED 外延MOCVD窗口目标任务</h6>
                                                    <span class="badge bg-warning">LED</span>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <p class="text-muted small mb-2">
                                                    <strong>模板:</strong> GaN/InGaN外延
                                                </p>
                                                <p class="text-muted small mb-2">
                                                    <strong>建议子任务数:</strong> 40个
                                                </p>
                                                <p class="text-muted small mb-3">
                                                    <strong>任务ID:</strong> <code>target-led-mocvd-003</code>
                                                </p>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="showDAG('target-led-mocvd-003', 203)">
                                                        <i class="fas fa-eye me-1"></i>预览DAG
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>创建任务
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-6 mb-3">
                                        <div class="card border-warning">
                                            <div class="card-header bg-light">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">MiniLED回流焊目标任务</h6>
                                                    <span class="badge bg-warning">LED</span>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <p class="text-muted small mb-2">
                                                    <strong>模板:</strong> 回流曲线+空洞率
                                                </p>
                                                <p class="text-muted small mb-2">
                                                    <strong>建议子任务数:</strong> 30个
                                                </p>
                                                <p class="text-muted small mb-3">
                                                    <strong>任务ID:</strong> <code>target-mini-led-reflow-004</code>
                                                </p>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="showDAG('target-mini-led-reflow-004', 204)">
                                                        <i class="fas fa-eye me-1"></i>预览DAG
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>创建任务
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-6 mb-3 d-flex">
                                        <div class="card border-primary h-100 w-100">
                                            <div class="card-header bg-light">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <h6 class="mb-0">模组AOI参数整定目标任务</h6>
                                                    <span class="badge bg-primary">LCD</span>
                                                </div>
                                            </div>
                                            <div class="card-body">
                                                <p class="text-muted small mb-2">
                                                    <strong>模板:</strong> 阈值/光源角度/增益
                                                </p>
                                                <p class="text-muted small mb-2">
                                                    <strong>建议子任务数:</strong> 26个
                                                </p>
                                                <p class="text-muted small mb-3">
                                                    <strong>任务ID:</strong> <code>target-module-aoi-005</code>
                                                </p>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-sm btn-outline-primary" onclick="showDAG('target-module-aoi-005', 205)">
                                                        <i class="fas fa-eye me-1"></i>预览DAG
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>创建任务
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 目标批次标签页 -->
                    <div class="tab-pane fade" id="target-batches">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">目标批次管理</h5>
                                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#createBatchModal">
                                    <i class="fas fa-plus me-2"></i>创建批次
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-4 mb-3">
                                        <div class="card border-info">
                                            <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                                                <h6 class="mb-0">目标批次 001</h6>
                                                <span class="badge bg-light text-info">计划中</span>
                                            </div>
                                            <div class="card-body">
                                                <div class="small mb-2">
                                                    <strong>批次ID:</strong> target-batch-001
                                                </div>
                                                <div class="small mb-2">
                                                    <strong>包含任务:</strong>
                                                </div>
                                                <ul class="small mb-2">
                                                    <li>LCD ITO工艺窗口 × 6</li>
                                                    <li>模组AOI参数整定 × 4</li>
                                                </ul>
                                                <div class="small mb-2">
                                                    <strong>总任务数:</strong> 10个
                                                </div>
                                                <div class="d-flex gap-2 mt-2">
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-edit me-1"></i>编辑
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>启动
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card border-warning">
                                            <div class="card-header bg-warning text-white d-flex justify-content-between align-items-center">
                                                <h6 class="mb-0">目标批次 002</h6>
                                                <span class="badge bg-light text-warning">计划中</span>
                                            </div>
                                            <div class="card-body">
                                                <div class="small mb-2">
                                                    <strong>批次ID:</strong> target-batch-002
                                                </div>
                                                <div class="small mb-2">
                                                    <strong>包含任务:</strong>
                                                </div>
                                                <ul class="small mb-2">
                                                    <li>LED 外延MOCVD窗口 × 5</li>
                                                    <li>MiniLED回流焊 × 5</li>
                                                </ul>
                                                <div class="small mb-2">
                                                    <strong>总任务数:</strong> 10个
                                                </div>
                                                <div class="d-flex gap-2 mt-2">
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-edit me-1"></i>编辑
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>启动
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-lg-4 mb-3">
                                        <div class="card border-success">
                                            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                                                <h6 class="mb-0">目标批次 003</h6>
                                                <span class="badge bg-light text-success">计划中</span>
                                            </div>
                                            <div class="card-body">
                                                <div class="small mb-2">
                                                    <strong>批次ID:</strong> target-batch-003
                                                </div>
                                                <div class="small mb-2">
                                                    <strong>包含任务:</strong>
                                                </div>
                                                <ul class="small mb-2">
                                                    <li>LCD PI烘烤曲线 × 8</li>
                                                    <li>LCD ITO工艺窗口 × 2</li>
                                                </ul>
                                                <div class="small mb-2">
                                                    <strong>总任务数:</strong> 10个
                                                </div>
                                                <div class="d-flex gap-2 mt-2">
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="fas fa-edit me-1"></i>编辑
                                                    </button>
                                                    <button class="btn btn-sm btn-success">
                                                        <i class="fas fa-play me-1"></i>启动
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- DAG查看模态框 -->
            <div class="modal fade" id="dagModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="dagModalTitle">DAG结构图</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div id="dagContainer" style="min-height: 500px;">
                                <!-- DAG图形将在这里显示 -->
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-primary">
                                <i class="fas fa-download me-2"></i>导出PNG
                            </button>
                            <button type="button" class="btn btn-outline-secondary">
                                <i class="fas fa-expand-arrows-alt me-2"></i>全屏查看
                            </button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 创建批次模态框 -->
            <div class="modal fade" id="createBatchModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">创建新批次</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="createBatchForm">
                                <div class="mb-3">
                                    <label for="batchName" class="form-label">批次名称</label>
                                    <input type="text" class="form-control" id="batchName" placeholder="请输入批次名称" required>
                                </div>
                                
                                <div class="mb-3">
                                    <label class="form-label">选择任务类型和数量</label>
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row" id="taskSelectionContainer">
                                                <div class="col-md-6 mb-3">
                                                    <div class="d-flex align-items-center">
                                                        <input type="checkbox" class="form-check-input me-2" id="task_lcd_ito" data-task="LCD ITO工艺窗口目标任务">
                                                        <label class="form-check-label flex-grow-1" for="task_lcd_ito">
                                                            LCD ITO工艺窗口目标任务
                                                        </label>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">×</span>
                                                            <input type="number" class="form-control form-control-sm" style="width: 70px;" 
                                                                   id="count_lcd_ito" min="1" max="50" value="1" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6 mb-3">
                                                    <div class="d-flex align-items-center">
                                                        <input type="checkbox" class="form-check-input me-2" id="task_lcd_pi" data-task="LCD PI烘烤曲线目标任务">
                                                        <label class="form-check-label flex-grow-1" for="task_lcd_pi">
                                                            LCD PI烘烤曲线目标任务
                                                        </label>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">×</span>
                                                            <input type="number" class="form-control form-control-sm" style="width: 70px;" 
                                                                   id="count_lcd_pi" min="1" max="50" value="1" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6 mb-3">
                                                    <div class="d-flex align-items-center">
                                                        <input type="checkbox" class="form-check-input me-2" id="task_led_mocvd" data-task="LED 外延MOCVD窗口目标任务">
                                                        <label class="form-check-label flex-grow-1" for="task_led_mocvd">
                                                            LED 外延MOCVD窗口目标任务
                                                        </label>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">×</span>
                                                            <input type="number" class="form-control form-control-sm" style="width: 70px;" 
                                                                   id="count_led_mocvd" min="1" max="50" value="1" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6 mb-3">
                                                    <div class="d-flex align-items-center">
                                                        <input type="checkbox" class="form-check-input me-2" id="task_mini_led" data-task="MiniLED回流焊目标任务">
                                                        <label class="form-check-label flex-grow-1" for="task_mini_led">
                                                            MiniLED回流焊目标任务
                                                        </label>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">×</span>
                                                            <input type="number" class="form-control form-control-sm" style="width: 70px;" 
                                                                   id="count_mini_led" min="1" max="50" value="1" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6 mb-3">
                                                    <div class="d-flex align-items-center">
                                                        <input type="checkbox" class="form-check-input me-2" id="task_aoi" data-task="模组AOI参数整定目标任务">
                                                        <label class="form-check-label flex-grow-1" for="task_aoi">
                                                            模组AOI参数整定目标任务
                                                        </label>
                                                        <div class="d-flex align-items-center">
                                                            <span class="me-2">×</span>
                                                            <input type="number" class="form-control form-control-sm" style="width: 70px;" 
                                                                   id="count_aoi" min="1" max="50" value="1" disabled>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="mt-3 p-3 bg-light rounded">
                                                <div class="d-flex justify-content-between">
                                                    <span><strong>总任务数：</strong></span>
                                                    <span id="totalTaskCount">0</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="batchDescription" class="form-label">批次描述（可选）</label>
                                    <textarea class="form-control" id="batchDescription" rows="3" placeholder="请输入批次描述"></textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary" id="createBatchBtn" disabled>创建批次</button>
                        </div>
                    </div>
                </div>
                </div> <!-- tab-system -->
            </div>

            <!-- 调度规则页面 -->
            <div id="rules-page" class="page-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="mb-0">调度规则</h2>
                    <button class="btn btn-primary" id="addNewRuleBtn">
                        <i class="fas fa-plus me-2"></i>新增调度规则
                    </button>
                </div>
                
                <!-- 规则卡片网格 -->
                <div class="row g-3" id="ruleCardsContainer">
                    <!-- DRL规则卡片 -->
                    
                    <!-- DRL_1 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="DRL_1">
                            <div class="rule-card-header">
                                <h6 class="rule-name">特征交叉注意机制</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-success">DRL</span>
                                    <span class="badge bg-warning text-dark">Cross-Attention</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">神经网络参数</small>
                                    <div class="params-display">
                                        <code>layers: [64,256,128,12]</code><br>
                                        <code>attention_heads: 8</code><br>
                                        <code>dropout: 0.1</code>
                                    </div>
                                </div>
                                <p class="rule-summary">应用特征交叉注意机制增强任务间依赖关系学习能力</p>
                                <div class="training-status">
                                    <span class="badge bg-success">已训练</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DRL_2 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="DRL_2">
                            <div class="rule-card-header">
                                <h6 class="rule-name">生成式策略网络</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-success">DRL</span>
                                    <span class="badge bg-warning text-dark">Generative</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">神经网络参数</small>
                                    <div class="params-display">
                                        <code>layers: [64,256,128,12]</code><br>
                                        <code>generator_dim: 256</code><br>
                                        <code>beta: 0.5</code>
                                    </div>
                                </div>
                                <p class="rule-summary">应用生成式策略网络动态生成调度策略，适应复杂场景</p>
                                <div class="training-status">
                                    <span class="badge bg-success">已训练</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DRL_3 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="DRL_3">
                            <div class="rule-card-header">
                                <h6 class="rule-name">元学习训练机制</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-success">DRL</span>
                                    <span class="badge bg-warning text-dark">Meta-Learning</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">神经网络参数</small>
                                    <div class="params-display">
                                        <code>layers: [64,256,128,12]</code><br>
                                        <code>meta_lr: 0.001</code><br>
                                        <code>adaptation_steps: 5</code>
                                    </div>
                                </div>
                                <p class="rule-summary">应用元学习训练机制快速适应新的调度场景</p>
                                <div class="training-status">
                                    <span class="badge bg-success">已训练</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 启发式规则卡片 -->
                    
                    <!-- HR_0 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_0">
                            <div class="rule-card-header">
                                <h6 class="rule-name">最短总处理时间优先</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">传输+执行优化</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>weights: [0.6, 0.4]</code><br>
                                        <code>threshold: 100ms</code>
                                    </div>
                                </div>
                                <p class="rule-summary">按最短总处理时间（传输+执行）优先调度任务</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_1 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_1">
                            <div class="rule-card-header">
                                <h6 class="rule-name">CPU空闲率最高优先</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">CPU负载均衡</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>cpu_threshold: 80%</code><br>
                                        <code>balance_factor: 1.2</code>
                                    </div>
                                </div>
                                <p class="rule-summary">优先分配到CPU空闲率最高的节点</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_2 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_2">
                            <div class="rule-card-header">
                                <h6 class="rule-name">内存空闲率最高优先</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">内存优化</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>mem_threshold: 70%</code><br>
                                        <code>reserve_ratio: 0.15</code>
                                    </div>
                                </div>
                                <p class="rule-summary">优先分配到内存空闲率最高的节点</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_3 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_3">
                            <div class="rule-card-header">
                                <h6 class="rule-name">最短执行时间优先</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">SJF变种</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>sort_order: ascending</code><br>
                                        <code>prediction_window: 5min</code>
                                    </div>
                                </div>
                                <p class="rule-summary">按预计仿真执行时间从短到长分配</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_4 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_4">
                            <div class="rule-card-header">
                                <h6 class="rule-name">最小传输时间优先</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">网络优化</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>bandwidth_weight: 0.8</code><br>
                                        <code>latency_penalty: 2.0</code>
                                    </div>
                                </div>
                                <p class="rule-summary">优先选择数据传输时间最小的节点</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_5 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_5">
                            <div class="rule-card-header">
                                <h6 class="rule-name">随机最短计算时间</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">随机采样</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>sample_size: M=5</code><br>
                                        <code>random_seed: adaptive</code>
                                    </div>
                                </div>
                                <p class="rule-summary">在M个随机候选方案中，选预计计算时间最短的方案</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_6 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_6">
                            <div class="rule-card-header">
                                <h6 class="rule-name">随机CPU方差最小</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">负载均衡</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>sample_size: M=5</code><br>
                                        <code>variance_threshold: 0.1</code>
                                    </div>
                                </div>
                                <p class="rule-summary">在M个随机候选方案中，选CPU空闲率方差最小的方案</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_7 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_7">
                            <div class="rule-card-header">
                                <h6 class="rule-name">随机总时间最短</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">随机优化</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>sample_size: M=5</code><br>
                                        <code>total_time_weight: 1.0</code>
                                    </div>
                                </div>
                                <p class="rule-summary">在M个随机候选方案中，选总处理时间最短的方案</p>
                            </div>
                        </div>
                    </div>

                    <!-- HR_8 -->
                    <div class="col-xl-4 col-lg-6 col-md-6">
                        <div class="rule-card" data-rule-id="HR_8">
                            <div class="rule-card-header">
                                <h6 class="rule-name">随机时间方差最小</h6>
                                <div class="rule-badges">
                                    <span class="badge bg-info">Heuristic</span>
                                    <span class="badge bg-light text-dark">稳定性优化</span>
                                </div>
                            </div>
                            <div class="rule-card-body">
                                <div class="rule-params" title="已训练模型，参数仅展示">
                                    <small class="text-muted">参数配置</small>
                                    <div class="params-display">
                                        <code>sample_size: M=5</code><br>
                                        <code>stability_factor: 1.5</code>
                                    </div>
                                </div>
                                <p class="rule-summary">在M个随机候选方案中，选总处理时间方差最小的方案</p>
                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <!-- 仿真配置页面 -->
            <div id="config-page" class="page-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="mb-0">仿真配置</h2>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-secondary" id="loadConfigBtn">
                            <i class="fas fa-upload me-2"></i>加载配置
                        </button>
                        <button class="btn btn-success" id="saveConfigBtn">
                            <i class="fas fa-save me-2"></i>保存配置
                        </button>
                    </div>
                </div>
                
                <!-- 基本信息区域 -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-info-circle me-2"></i>基本信息
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="configName" class="form-label">配置名称 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="configName" placeholder="请输入配置名称">
                                </div>
                                <div class="mb-3">
                                    <label for="randomSeed" class="form-label">随机种子</label>
                                    <input type="number" class="form-control" id="randomSeed" placeholder="空则随机生成">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">资源概况</label>
                                    <div class="bg-light p-3 rounded">
                                        <div class="small mb-2">
                                            <strong>计算节点:</strong> 11个节点 (1个云节点 + 10个边缘节点)
                                        </div>
                                        <div class="small mb-2">
                                            <strong>计算资源:</strong> 总计176核心, 1408GB内存
                                        </div>
                                        <div class="small mb-2">
                                            <strong>IoT设备:</strong> 40个设备 (38个在线 + 2个离线)
                                        </div>
                                        <div class="small mb-2">
                                            <strong>License:</strong> 12/33使用中 (COMSOL 1/3, Fluent 3/4, ANSYS 3/5, TCAD 0/3, STACK 2/6, 等)
                                        </div>
                                        <div class="small">
                                            <strong>专家:</strong> 6/10可用
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">平台信息</label>
                                    <div class="bg-light p-3 rounded">
                                        <div class="small mb-1">前端版本: web-v0.12</div>
                                        <div class="small mb-1">操作系统: Windows 11 Professional</div>
                                        <div class="small">主机: x86_64 32C/128G</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <!-- 左侧: 任务选择 -->
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-tasks me-2"></i>任务选择
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">目标批次 <span class="text-danger">*</span></label>
                                    <select class="form-select" id="targetBatchSelect">
                                        <option value="">请选择目标批次</option>
                                        <option value="target-batch-001">目标批次 001</option>
                                        <option value="target-batch-002">目标批次 002</option>
                                        <option value="target-batch-003">目标批次 003</option>
                                    </select>
                                </div>
                                
                                <div id="batchPreview" class="d-none">
                                    <h6>批次预览</h6>
                                    <div class="bg-light p-3 rounded">
                                        <div class="small mb-2">
                                            <strong>任务数:</strong> <span id="taskCount">-</span>个
                                        </div>
                                        <div class="small mb-2">
                                            <strong>任务类型:</strong>
                                            <div id="taskTypes"></div>
                                        </div>
                                        <div class="small">
                                            <strong>估算子任务总量:</strong> <span id="estimatedSubtasks">-</span>个
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 中间: 策略选择 -->
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-brain me-2"></i>策略选择
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">调度规则 <span class="text-danger">*</span></label>
                                    <select class="form-select" id="policySelect">
                                        <option value="">请选择调度策略</option>
                                        <optgroup label="DRL规则">
                                            <option value="DRL_1">特征交叉注意机制</option>
                                            <option value="DRL_2">生成式策略网络</option>
                                            <option value="DRL_3">元学习训练机制</option>
                                        </optgroup>
                                        <optgroup label="启发式规则">
                                            <option value="HR_0">最短总处理时间优先</option>
                                            <option value="HR_1">CPU空闲率最高优先</option>
                                            <option value="HR_2">内存空闲率最高优先</option>
                                            <option value="HR_3">最短执行时间优先</option>
                                            <option value="HR_4">最小传输时间优先</option>
                                            <option value="HR_5">随机最短计算时间</option>
                                            <option value="HR_6">随机CPU负载平衡</option>
                                            <option value="HR_7">随机最短总时间</option>
                                            <option value="HR_8">随机最小时间方差</option>
                                        </optgroup>
                                    </select>
                                </div>
                                
                                <div id="policyPreview" class="d-none">
                                    <h6>策略参数</h6>
                                    <div class="bg-light p-3 rounded">
                                        <div id="policyParams"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧: 动态事件 -->
                    <div class="col-lg-4 mb-4">
                        <div class="card h-100">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-random me-2"></i>动态事件
                                </h5>
                            </div>
                            <div class="card-body">
                                <!-- 资源不可用事件 -->
                                <div class="mb-4">
                                    <h6>资源不可用</h6>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="enableNodeDown">
                                        <label class="form-check-label" for="enableNodeDown">
                                            启用节点下线事件
                                        </label>
                                    </div>
                                    <div id="nodeDownConfig" class="ms-3 d-none">
                                        <div class="mb-2">
                                            <label class="form-label small">截断类型 (控制触发阈值)</label>
                                            <select class="form-select form-select-sm" id="nodeDownSigma">
                                                <option value="2">2σ 截断</option>
                                                <option value="3" selected>3σ 截断</option>
                                                <option value="4">4σ 截断</option>
                                            </select>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <label class="form-label small">下线时间(均值)</label>
                                                <input type="number" class="form-control form-control-sm" id="downDurationMean" value="120">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label small">标准差</label>
                                                <input type="number" class="form-control form-control-sm" id="downDurationStd" value="40">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 任务动态事件 -->
                                <div class="mb-3">
                                    <h6>任务动态</h6>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="enableTaskInsert">
                                        <label class="form-check-label" for="enableTaskInsert">
                                            任务插入事件
                                        </label>
                                    </div>
                                    <div id="taskInsertConfig" class="ms-3 d-none">
                                        <div class="mb-2">
                                            <label class="form-label small">截断类型 (控制触发阈值)</label>
                                            <select class="form-select form-select-sm" id="taskInsertSigma">
                                                <option value="2">2σ 截断</option>
                                                <option value="3" selected>3σ 截断</option>
                                                <option value="4">4σ 截断</option>
                                            </select>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <label class="form-label small">任务大小(均值)</label>
                                                <input type="number" class="form-control form-control-sm" id="taskSizeMean" value="2.0" step="0.1">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label small">标准差</label>
                                                <input type="number" class="form-control form-control-sm" id="taskSizeStd" value="0.7" step="0.1">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="enableSubtaskInsert">
                                        <label class="form-check-label" for="enableSubtaskInsert">
                                            子任务插入事件
                                        </label>
                                    </div>
                                    <div id="subtaskInsertConfig" class="ms-3 d-none">
                                        <div class="mb-2">
                                            <label class="form-label small">截断类型 (控制触发阈值)</label>
                                            <select class="form-select form-select-sm" id="subtaskInsertSigma">
                                                <option value="2">2σ 截断</option>
                                                <option value="3" selected>3σ 截断</option>
                                                <option value="4">4σ 截断</option>
                                            </select>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <label class="form-label small">扩展因子(均值)</label>
                                                <input type="number" class="form-control form-control-sm" id="fanoutMean" value="3.0" step="0.1" min="1">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label small">标准差</label>
                                                <input type="number" class="form-control form-control-sm" id="fanoutStd" value="1.0" step="0.1">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="checkbox" id="enableSubtaskRetry">
                                        <label class="form-check-label" for="enableSubtaskRetry">
                                            子任务重试事件
                                        </label>
                                    </div>
                                    <div id="subtaskRetryConfig" class="ms-3 d-none">
                                        <div class="mb-2">
                                            <label class="form-label small">截断类型 (控制触发阈值)</label>
                                            <select class="form-select form-select-sm" id="subtaskRetrySigma">
                                                <option value="2">2σ 截断</option>
                                                <option value="3" selected>3σ 截断</option>
                                                <option value="4">4σ 截断</option>
                                            </select>
                                        </div>
                                        <div class="row mb-2">
                                            <div class="col-6">
                                                <label class="form-label small">重试概率(均值)</label>
                                                <input type="number" class="form-control form-control-sm" id="retryProbMean" value="0.05" step="0.01" min="0" max="1">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label small">标准差</label>
                                                <input type="number" class="form-control form-control-sm" id="retryProbStd" value="0.02" step="0.01">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 事件预览 -->
                                <div class="small text-muted">
                                    <i class="fas fa-chart-line me-1"></i>事件预览图表将在这里显示
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 配置预览 -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-eye me-2"></i>配置预览
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>当前配置摘要</h6>
                                <div class="bg-light p-3 rounded">
                                    <div id="configSummary">
                                        <div class="text-muted">请填写必要信息后查看预览</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>验证状态</h6>
                                <div class="bg-light p-3 rounded">
                                    <div id="validationStatus">
                                        <div class="text-warning">
                                            <i class="fas fa-exclamation-triangle me-1"></i>配置未完成
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 历史配置列表 -->
                <div class="card mt-4">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-history me-2"></i>历史配置
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row" id="historicalConfigs">
                            <div class="col-md-6 mb-3">
                                <div class="card border-secondary">
                                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0">LCD-ITO-窗口-DRL-交叉注意</h6>
                                        <span class="badge bg-secondary">已保存</span>
                                    </div>
                                    <div class="card-body p-3">
                                        <div class="small mb-2">
                                            <strong>配置 ID:</strong> cfg-20250824-001
                                        </div>
                                        <div class="small mb-2">
                                            <strong>目标批次:</strong> target-batch-002
                                        </div>
                                        <div class="small mb-2">
                                            <strong>调度策略:</strong> DRL_1 (特征交叉注意机制)
                                        </div>
                                        <div class="small mb-2">
                                            <strong>随机种子:</strong> 12345
                                        </div>
                                        <div class="small text-muted mb-2">
                                            创建时间: 2024-08-24 15:30:00
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadHistoricalConfig('cfg-20250824-001')">
                                                <i class="fas fa-upload me-1"></i>加载
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteHistoricalConfig('cfg-20250824-001')">
                                                <i class="fas fa-trash me-1"></i>删除
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <div class="card border-secondary">
                                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0">LED-MOCVD-启发式-最短时间</h6>
                                        <span class="badge bg-secondary">已保存</span>
                                    </div>
                                    <div class="card-body p-3">
                                        <div class="small mb-2">
                                            <strong>配置 ID:</strong> cfg-20250824-002
                                        </div>
                                        <div class="small mb-2">
                                            <strong>目标批次:</strong> target-batch-002
                                        </div>
                                        <div class="small mb-2">
                                            <strong>调度策略:</strong> HR_0 (最短总处理时间优先)
                                        </div>
                                        <div class="small mb-2">
                                            <strong>随机种子:</strong> 54321
                                        </div>
                                        <div class="small text-muted mb-2">
                                            创建时间: 2024-08-23 09:45:00
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadHistoricalConfig('cfg-20250824-002')">
                                                <i class="fas fa-upload me-1"></i>加载
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteHistoricalConfig('cfg-20250824-002')">
                                                <i class="fas fa-trash me-1"></i>删除
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <div class="card border-success">
                                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0">LCD-PI-烘烤-DRL-生成式</h6>
                                        <span class="badge bg-success">待执行</span>
                                    </div>
                                    <div class="card-body p-3">
                                        <div class="small mb-2">
                                            <strong>配置 ID:</strong> cfg-20250825-003
                                        </div>
                                        <div class="small mb-2">
                                            <strong>目标批次:</strong> target-batch-003
                                        </div>
                                        <div class="small mb-2">
                                            <strong>调度策略:</strong> DRL_2 (生成式策略网络)
                                        </div>
                                        <div class="small mb-2">
                                            <strong>随机种子:</strong> 99999
                                        </div>
                                        <div class="small text-muted mb-2">
                                            创建时间: 2024-08-25 11:20:00
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-sm btn-primary" onclick="executeConfig('cfg-20250825-003')">
                                                <i class="fas fa-play me-1"></i>执行
                                            </button>
                                            <button class="btn btn-sm btn-outline-primary" onclick="loadHistoricalConfig('cfg-20250825-003')">
                                                <i class="fas fa-upload me-1"></i>加载
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" onclick="deleteHistoricalConfig('cfg-20250825-003')">
                                                <i class="fas fa-trash me-1"></i>删除
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 仿真运行页面 -->
            <div id="simulation-page" class="page-content">
                <h2 class="mb-4">仿真运行状态</h2>
                
                <!-- 运行控制面板 -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="fas fa-play-circle me-2"></i>仿真控制
                        </h5>
                        <div>
                            <button class="btn btn-success me-2">
                                <i class="fas fa-play me-2"></i>启动仿真
                            </button>
                            <button class="btn btn-warning me-2">
                                <i class="fas fa-pause me-2"></i>暂停
                            </button>
                            <button class="btn btn-danger me-2">
                                <i class="fas fa-stop me-2"></i>停止
                            </button>
                            <button class="btn btn-info">
                                <i class="fas fa-download me-2"></i>导出日志
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="h4 text-success">运行中</div>
                                    <small class="text-muted">仿真状态</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="h4 text-primary">00:15:32</div>
                                    <small class="text-muted">运行时间</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="h4 text-info">批次 B001</div>
                                    <small class="text-muted">当前场景</small>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="h4 text-warning">DRL+FIFO</div>
                                    <small class="text-muted">调度策略</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <!-- 任务队列状态 -->
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-list me-2"></i>任务队列
                                </h5>
                            </div>
                            <div class="card-body">
                                <h6>等待队列 (8个任务)</h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><code>T-145</code> 显示面板装配</span>
                                        <span class="badge bg-success">高</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-secondary" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><code>T-162</code> 质量检测流程</span>
                                        <span class="badge bg-warning">中</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-secondary" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">运行中 (5个任务)</h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><code>T-098</code> 仿真建模</span>
                                        <span class="badge bg-primary">运行</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-primary progress-bar-animated" style="width: 65%"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <span><code>T-112</code> 数据分析</span>
                                        <span class="badge bg-primary">运行</span>
                                    </div>
                                    <div class="progress">
                                        <div class="progress-bar bg-primary progress-bar-animated" style="width: 32%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gantt图 -->
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-chart-gantt me-2"></i>任务调度甘特图
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="gantt-container">
                                    <canvas id="ganttChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <!-- 事件流 -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-stream me-2"></i>实时事件流
                                </h5>
                            </div>
                            <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <span class="badge bg-primary">15:35:42</span>
                                        <span class="ms-2">任务 T-098 开始执行 (节点: Cloud-01)</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-success">15:35:15</span>
                                        <span class="ms-2">任务 T-087 执行完成 (耗时: 8.2min)</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-warning">15:34:58</span>
                                        <span class="ms-2">License SimSoft Pro 被任务 T-112 申请</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-info">15:34:30</span>
                                        <span class="ms-2">DRL策略建议: 任务 T-145 优先级提升</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-danger">15:33:45</span>
                                        <span class="ms-2">节点 Edge-03 负载过高 (CPU: 91%)</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-secondary">15:33:12</span>
                                        <span class="ms-2">任务 T-162 进入等待队列</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-primary">15:32:58</span>
                                        <span class="ms-2">子任务 T-098-ST03 开始数据传输</span>
                                    </div>
                                    <div class="timeline-item mt-2">
                                        <span class="badge bg-success">15:32:20</span>
                                        <span class="ms-2">IoT设备 IoT-001 数据采集完成</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 资源利用率监控 -->
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-tachometer-alt me-2"></i>资源利用率监控
                                </h5>
                            </div>
                            <div class="card-body">
                                <h6>计算资源</h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>Cloud-01 CPU</span>
                                        <span>89%</span>
                                    </div>
                                    <div class="progress mb-1">
                                        <div class="progress-bar bg-danger" style="width: 89%"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>Edge-03 CPU</span>
                                        <span>76%</span>
                                    </div>
                                    <div class="progress mb-1">
                                        <div class="progress-bar bg-warning" style="width: 76%"></div>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">License使用</h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>SimSoft Pro</span>
                                        <span>16/20</span>
                                    </div>
                                    <div class="progress mb-1">
                                        <div class="progress-bar bg-primary" style="width: 80%"></div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between">
                                        <span>ModelX Engine</span>
                                        <span>7/10</span>
                                    </div>
                                    <div class="progress mb-1">
                                        <div class="progress-bar bg-info" style="width: 70%"></div>
                                    </div>
                                </div>
                                
                                <h6 class="mt-4">网络传输</h6>
                                <canvas id="networkChart" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 结果统计页面 -->
            <div id="results-page" class="page-content">
                <h2 class="mb-4">仿真结果统计</h2>
                
                <!-- 关键指标概览 -->
                <div class="row mb-4">
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-clock fa-2x text-primary mb-3"></i>
                                <h4 class="text-primary">8.7min</h4>
                                <h6>最大完工时间 (Makespan)</h6>
                                <small class="text-success">↓ 29% vs FIFO</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-chart-line fa-2x text-success mb-3"></i>
                                <h4 class="text-success">89.2%</h4>
                                <h6>平均资源利用率</h6>
                                <small class="text-success">↑ 12% vs FIFO</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-check-circle fa-2x text-info mb-3"></i>
                                <h4 class="text-info">96.8%</h4>
                                <h6>任务成功率</h6>
                                <small class="text-success">↑ 2.6% vs FIFO</small>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-hourglass-half fa-2x text-warning mb-3"></i>
                                <h4 class="text-warning">1.3min</h4>
                                <h6>平均等待时间</h6>
                                <small class="text-success">↓ 66% vs FIFO</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 性能对比图表 -->
                <div class="row mb-4">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-chart-bar me-2"></i>策略性能对比
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="performanceComparisonChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-line-chart me-2"></i>Makespan收敛曲线
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="convergenceChart" height="300"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 详细分析 -->
                <div class="row mb-4">
                    <div class="col-lg-8 mb-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="fas fa-table me-2"></i>详细实验结果
                                </h5>
                                <div>
                                    <button class="btn btn-primary btn-sm me-2">
                                        <i class="fas fa-download me-2"></i>导出CSV
                                    </button>
                                    <button class="btn btn-success btn-sm">
                                        <i class="fas fa-image me-2"></i>导出PNG
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>批次ID</th>
                                                <th>场景</th>
                                                <th>策略</th>
                                                <th>Makespan</th>
                                                <th>资源利用率</th>
                                                <th>成功率</th>
                                                <th>等待时间</th>
                                                <th>事件次数</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="table-success">
                                                <td><strong>B001</strong></td>
                                                <td>显示面板-高负载</td>
                                                <td><span class="badge bg-primary">DRL (全开)</span></td>
                                                <td><strong>8.7min</strong></td>
                                                <td>89.2%</td>
                                                <td>96.8%</td>
                                                <td>1.3min</td>
                                                <td>5</td>
                                            </tr>
                                            <tr>
                                                <td>B002</td>
                                                <td>显示面板-高负载</td>
                                                <td>FIFO</td>
                                                <td>12.3min</td>
                                                <td>76.4%</td>
                                                <td>94.2%</td>
                                                <td>3.8min</td>
                                                <td>3</td>
                                            </tr>
                                            <tr>
                                                <td>B003</td>
                                                <td>质量检测-标准流程</td>
                                                <td><span class="badge bg-primary">DRL (全开)</span></td>
                                                <td>6.2min</td>
                                                <td>91.5%</td>
                                                <td>98.1%</td>
                                                <td>0.9min</td>
                                                <td>2</td>
                                            </tr>
                                            <tr>
                                                <td>B004</td>
                                                <td>质量检测-标准流程</td>
                                                <td>SJF</td>
                                                <td>8.9min</td>
                                                <td>83.2%</td>
                                                <td>95.7%</td>
                                                <td>2.1min</td>
                                                <td>4</td>
                                            </tr>
                                            <tr>
                                                <td>B005</td>
                                                <td>能耗优化-综合测试</td>
                                                <td><span class="badge bg-warning">DRL (部分)</span></td>
                                                <td>10.1min</td>
                                                <td>87.3%</td>
                                                <td>95.4%</td>
                                                <td>1.8min</td>
                                                <td>7</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">
                                    <i class="fas fa-pie-chart me-2"></i>事件影响分析
                                </h5>
                            </div>
                            <div class="card-body">
                                <canvas id="eventImpactChart" height="300"></canvas>
                                
                                <hr>
                                
                                <h6>事件统计</h6>
                                <div class="mb-2">
                                    <div class="d-flex justify-content-between">
                                        <span>节点宕机</span>
                                        <span class="badge bg-danger">8次</span>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex justify-content-between">
                                        <span>任务插入</span>
                                        <span class="badge bg-info">12次</span>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <div class="d-flex justify-content-between">
                                        <span>子任务重执行</span>
                                        <span class="badge bg-warning">5次</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- DRL模块贡献分析 -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="fas fa-brain me-2"></i>DRL模块贡献度分析
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-8">
                                <canvas id="drlContributionChart" height="200"></canvas>
                            </div>
                            <div class="col-lg-4">
                                <h6>模块效果评估</h6>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>特征交叉注意机制</span>
                                        <span class="badge bg-success">+15%</span>
                                    </div>
                                    <small class="text-muted">提升任务依赖关系识别准确率</small>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>生成式策略网络</span>
                                        <span class="badge bg-primary">+22%</span>
                                    </div>
                                    <small class="text-muted">动态适应复杂调度场景</small>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span>元训练机制</span>
                                        <span class="badge bg-warning">+8%</span>
                                    </div>
                                    <small class="text-muted">快速适应新场景，减少训练时间</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 结果分析页面 -->
        <div id="results-page" class="page-content">
            <h2 class="mb-4">结果分析</h2>
            
            <div class="row">
                <!-- 性能对比图表 -->
                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-chart-bar me-2"></i>策略性能对比
                            </h5>
                        </div>
                        <div class="card-body">
                            <div style="height: 300px;">
                                <canvas id="performanceComparisonChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DRL收敛性分析 -->
                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-chart-line me-2"></i>DRL收敛性分析
                            </h5>
                        </div>
                        <div class="card-body">
                            <div style="height: 300px;">
                                <canvas id="convergenceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DRL模块贡献度 -->
                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-radar-chart me-2"></i>DRL模块贡献度
                            </h5>
                        </div>
                        <div class="card-body">
                            <div style="height: 350px;">
                                <canvas id="drlContributionChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 性能提升统计 -->
                <div class="col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">
                                <i class="fas fa-trophy me-2"></i>性能提升统计
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>特征交叉注意机制</span>
                                    <span class="badge bg-success">+15%</span>
                                </div>
                                <small class="text-muted">提升任务依赖关系识别准确率</small>
                            </div>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>生成式策略网络</span>
                                    <span class="badge bg-primary">+22%</span>
                                </div>
                                <small class="text-muted">动态适应复杂调度场景</small>
                            </div>
                            
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>元训练机制</span>
                                    <span class="badge bg-warning">+8%</span>
                                </div>
                                <small class="text-muted">快速适应新场景，减少训练时间</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // 页面切换功能
        function showPage(pageId, clickedElement) {
            // 隐藏所有页面
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.style.display = 'none';
            });

            // 显示目标页面
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
            }

            // 更新导航状态
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            // 如果有点击的元素，则添加active类
            if (clickedElement) {
                clickedElement.classList.add('active');
            } else if (typeof event !== 'undefined' && event.target) {
                event.target.classList.add('active');
            }
        }
        
        // 页面加载后显示默认页面
        document.addEventListener('DOMContentLoaded', function() {
            showPage('dashboard-page');
            // 设置默认的active导航链接
            const dashboardLink = document.querySelector('a[onclick*="dashboard-page"]');
            if (dashboardLink) {
                dashboardLink.classList.add('active');
            }
        });

        // 所有初始化函数已移至对应的模块文件
    </script>
    
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript模块 -->
    <script src="js/resource-management.js"></script>
    <script src="js/scheduling-management.js"></script>
    <script src="js/task-management.js"></script>
    
    <script>
    // 通用标签页系统管理
    class TabManager {
        constructor() {
            this.init();
        }
        
        init() {
            // 页面加载完成后初始化标签系统
            document.addEventListener('DOMContentLoaded', () => {
                this.fixAllTabDisplays();
                // 延迟修复，确保Bootstrap完全初始化
                setTimeout(() => this.fixAllTabDisplays(), 100);
                setTimeout(() => this.fixAllTabDisplays(), 500);
                
                // 绑定标签点击事件
                this.bindTabEvents();
            });
        }
        
        // 修复所有页面的标签显示问题
        fixAllTabDisplays() {
            const tabContainers = document.querySelectorAll('.tab-system');
            tabContainers.forEach(container => {
                this.fixTabDisplay(container);
            });
        }
        
        // 修复单个容器的标签显示
        fixTabDisplay(container) {
            const tabPanes = container.querySelectorAll('.tab-content .tab-pane');
            tabPanes.forEach(pane => {
                if (pane.classList.contains('active') && pane.classList.contains('show')) {
                    // 显示活动标签页
                    this.showTabPane(pane);
                } else {
                    // 隐藏非活动标签页
                    this.hideTabPane(pane);
                    pane.classList.remove('active', 'show');
                }
            });
        }
        
        // 绑定标签点击事件
        bindTabEvents() {
            document.addEventListener('click', (e) => {
                const tabLink = e.target.closest('[data-bs-toggle="tab"]');
                if (tabLink) {
                    const targetId = tabLink.getAttribute('href').substring(1);
                    const container = tabLink.closest('.tab-system');
                    
                    if (container) {
                        // 立即隐藏所有标签页
                        const allPanes = container.querySelectorAll('.tab-content .tab-pane');
                        allPanes.forEach(pane => {
                            pane.classList.remove('active', 'show');
                            this.hideTabPane(pane);
                        });
                        
                        // 显示目标标签页
                        const targetPane = container.querySelector(`#${targetId}`);
                        if (targetPane) {
                            targetPane.classList.add('active', 'show');
                            this.showTabPane(targetPane);
                        }
                        
                        // 延迟再次修复，确保Bootstrap处理完成
                        setTimeout(() => this.fixTabDisplay(container), 50);
                    }
                }
            });
        }
        
        // 显示标签页
        showTabPane(pane) {
            pane.style.display = 'block';
            pane.style.opacity = '1';
            pane.style.visibility = 'visible';
            pane.style.height = 'auto';
            pane.style.overflow = 'visible';
            pane.style.position = 'relative';
            pane.style.left = 'auto';
        }
        
        // 隐藏标签页
        hideTabPane(pane) {
            pane.style.display = 'none';
            pane.style.opacity = '0';
            pane.style.visibility = 'hidden';
            pane.style.height = '0';
            pane.style.overflow = 'hidden';
            pane.style.position = 'absolute';
            pane.style.left = '-9999px';
        }
    }
    
    // 初始化标签管理器
    new TabManager();
    
    // RuleCard 管理器
    class RuleCardManager {
        constructor() {
            this.ruleData = this.initRuleData();
            this.init();
        }
        
        init() {
            document.addEventListener('DOMContentLoaded', () => {
                this.bindEvents();
            });
        }
        
        // 初始化规则数据
        initRuleData() {
            return {
                'HR_0': {
                    name: '最短总处理时间优先',
                    category: 'Heuristic',
                    description: '按最短总处理时间（传输+执行）优先调度任务，优化整体系统吞吐量。该策略综合考虑数据传输时间和计算执行时间，通过权重分配来平衡两者的重要性。',
                    params: {
                        '权重配置': '传输时间权重 0.6，执行时间权重 0.4',
                        '阈值设置': '最小处理时间阈值 100ms',
                        '适用场景': '网络传输开销较大的分布式环境'
                    },
                    metrics: { makespan: '8.9min', utilization: '84%' },
                    status: ['就绪', '已优化']
                },
                'HR_1': {
                    name: 'CPU空闲率最高优先',
                    category: 'Heuristic',
                    description: '优先选择CPU空闲率最高的节点进行任务分配，实现CPU负载的动态均衡，避免某些节点过载而其他节点闲置。',
                    params: {
                        'CPU阈值': '80% CPU使用率上限',
                        '均衡因子': '1.2 负载均衡权重',
                        '适用场景': 'CPU密集型任务调度'
                    },
                    metrics: { makespan: '9.2min', utilization: '88%' },
                    status: ['就绪', '负载均衡']
                },
                'HR_2': {
                    name: '内存空闲率最高优先',
                    category: 'Heuristic',
                    description: '优先选择内存空闲率最高的节点进行任务分配，特别适用于内存密集型应用，确保充足的内存资源。',
                    params: {
                        '内存阈值': '70% 内存使用率上限',
                        '保留比例': '0.15 内存保留率',
                        '适用场景': '大数据处理和内存密集型仿真'
                    },
                    metrics: { makespan: '9.5min', utilization: '82%' },
                    status: ['就绪', '内存优化']
                },
                'HR_3': {
                    name: '最短执行时间优先',
                    category: 'Heuristic',
                    description: '按预计仿真执行时间从短到长进行任务调度，这是经典SJF算法的改进版本，适用于已知任务执行时间的场景。',
                    params: {
                        '排序方式': '按执行时间升序排列',
                        '预测窗口': '5分钟时间窗口',
                        '适用场景': '批处理和已知执行时间的任务'
                    },
                    metrics: { makespan: '10.1min', utilization: '79%' },
                    status: ['就绪', 'SJF改进']
                },
                'HR_4': {
                    name: '最小传输时间优先',
                    category: 'Heuristic',
                    description: '优先选择数据传输时间最小的节点，特别适用于数据密集型应用，减少网络传输开销。',
                    params: {
                        '带宽权重': '0.8 带宽优先级权重',
                        '延迟惩罚': '2.0 网络延迟惩罚因子',
                        '适用场景': '数据密集型分布式计算'
                    },
                    metrics: { makespan: '9.8min', utilization: '81%' },
                    status: ['就绪', '网络优化']
                },
                'HR_5': {
                    name: '随机最短计算时间',
                    category: 'Heuristic',
                    description: '在M个随机候选方案中选择预计计算时间最短的方案，结合随机性和优化性，避免局部最优解。',
                    params: {
                        '采样规模': 'M=5 候选方案数量',
                        '随机种子': '自适应种子策略',
                        '适用场景': '复杂优化环境下的负载均衡'
                    },
                    metrics: { makespan: '9.6min', utilization: '83%' },
                    status: ['就绪', '随机优化']
                },
                'HR_6': {
                    name: '随机CPU方差最小',
                    category: 'Heuristic',
                    description: '在M个随机候选方案中选择CPU空闲率方差最小的方案，实现更稳定的负载分布。',
                    params: {
                        '采样规模': 'M=5 候选方案数量',
                        '方差阈值': '0.1 CPU方差上限',
                        '适用场景': '要求稳定性能的计算场景'
                    },
                    metrics: { makespan: '10.3min', utilization: '85%' },
                    status: ['就绪', '方差优化']
                },
                'HR_7': {
                    name: '随机总时间最短',
                    category: 'Heuristic',
                    description: '在M个随机候选方案中选择总处理时间最短的方案，结合随机采样和全局优化。',
                    params: {
                        '采样规模': 'M=5 候选方案数量',
                        '时间权重': '1.0 总时间权重',
                        '适用场景': '追求最短完成时间的任务调度'
                    },
                    metrics: { makespan: '9.1min', utilization: '86%' },
                    status: ['就绪', '时间优化']
                },
                'HR_8': {
                    name: '随机时间方差最小',
                    category: 'Heuristic',
                    description: '在M个随机候选方案中选择总处理时间方差最小的方案，确保调度结果的稳定性和可预测性。',
                    params: {
                        '采样规模': 'M=5 候选方案数量',
                        '稳定因子': '1.5 稳定性权重',
                        '适用场景': '要求调度稳定性的生产环境'
                    },
                    metrics: { makespan: '10.5min', utilization: '80%' },
                    status: ['就绪', '稳定性优化']
                },
                'DRL_1': {
                    name: '特征交叉注意机制',
                    category: 'DRL',
                    description: '应用特征交叉注意机制增强任务间依赖关系学习能力。该模型通过多头注意力机制捕获任务间的复杂依赖关系，提高调度决策的准确性。',
                    params: {
                        '网络结构': '[64,256,128,12] 层神经元配置',
                        '注意力头': '8个多头注意力机制',
                        '正则化': '0.1 Dropout防止过拟合'
                    },
                    metrics: { makespan: '8.7min', utilization: '89%' },
                    status: ['已训练', '准确率: 92.1%'],
                    training: true
                },
                'DRL_2': {
                    name: '生成式策略网络',
                    category: 'DRL',
                    description: '应用生成式策略网络动态生成调度策略，适应复杂场景。该模型能够根据当前系统状态动态生成最优的调度策略。',
                    params: {
                        '网络结构': '[128,512,256,16] 生成器架构',
                        '生成维度': '256维策略空间',
                        'Beta参数': '0.5 生成平衡因子'
                    },
                    metrics: { makespan: '8.5min', utilization: '91%' },
                    status: ['已训练', '准确率: 94.3%'],
                    training: true
                },
                'DRL_3': {
                    name: '元学习训练机制',
                    category: 'DRL',
                    description: '应用元学习训练机制快速适应新的调度场景。该模型具备快速学习能力，能够在少量样本下适应新的调度环境。',
                    params: {
                        '网络结构': '[96,384,192,8] 元学习架构',
                        '元学习率': '0.001 自适应学习率',
                        '适应步数': '5步快速适应'
                    },
                    metrics: { makespan: '8.9min', utilization: '87%' },
                    status: ['已训练', '准确率: 90.7%'],
                    training: true
                }
            };
        }
        
        // 绑定事件
        bindEvents() {
            // 绑定单选按钮事件
            document.querySelectorAll('.rule-selector').forEach(radio => {
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        this.updateSelectedRule(e.target.value);
                    }
                });
            });
            
            // 绑定卡片点击事件
            document.querySelectorAll('.rule-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.type !== 'radio') {
                        const ruleId = card.getAttribute('data-rule-id');
                        const radio = card.querySelector('.rule-selector');
                        radio.checked = true;
                        this.updateSelectedRule(ruleId);
                    }
                });
            });
        }
        
        // 更新选中的规则
        updateSelectedRule(ruleId) {
            this.selectedRule = ruleId;
            
            // 更新卡片选中状态
            document.querySelectorAll('.rule-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const selectedCard = document.querySelector(`[data-rule-id="${ruleId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }
            
            // 更新顶部显示
            const selectedRuleNameElement = document.getElementById('selectedRuleName');
            if (selectedRuleNameElement && this.ruleData[ruleId]) {
                selectedRuleNameElement.textContent = ruleId;
            }
            
            // 更新详细信息
            this.updateRuleDetails(ruleId);
        }
        
        // 更新规则详细信息
        updateRuleDetails(ruleId) {
            const ruleInfo = this.ruleData[ruleId];
            if (!ruleInfo) return;
            
            // 更新详细信息标题
            const detailRuleNameElement = document.getElementById('detailRuleName');
            if (detailRuleNameElement) {
                detailRuleNameElement.textContent = ruleInfo.name;
            }
            
            // 更新描述
            const detailRuleDescriptionElement = document.getElementById('detailRuleDescription');
            if (detailRuleDescriptionElement) {
                detailRuleDescriptionElement.textContent = ruleInfo.description;
            }
            
            // 更新参数详情
            const detailRuleParamsElement = document.getElementById('detailRuleParams');
            if (detailRuleParamsElement) {
                let paramsHtml = '';
                for (const [key, value] of Object.entries(ruleInfo.params)) {
                    paramsHtml += `<p><strong>${key}:</strong> ${value}</p>`;
                }
                detailRuleParamsElement.innerHTML = paramsHtml;
            }
            
            // 更新性能指标
            const detailRuleMetricsElement = document.getElementById('detailRuleMetrics');
            if (detailRuleMetricsElement) {
                detailRuleMetricsElement.innerHTML = `
                    <div class="col-6">
                        <div class="text-center p-3 bg-light rounded">
                            <div class="h4 text-primary">${ruleInfo.metrics.makespan}</div>
                            <small class="text-muted">预计Makespan</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="text-center p-3 bg-light rounded">
                            <div class="h4 text-success">${ruleInfo.metrics.utilization}</div>
                            <small class="text-muted">资源利用率</small>
                        </div>
                    </div>
                `;
            }
            
            // 更新状态
            const detailRuleStatusElement = document.getElementById('detailRuleStatus');
            if (detailRuleStatusElement) {
                let statusHtml = '';
                ruleInfo.status.forEach((status, index) => {
                    const badgeClass = index === 0 ? 'bg-success' : 'bg-info';
                    const marginClass = index > 0 ? 'ms-1' : '';
                    statusHtml += `<span class="badge ${badgeClass} ${marginClass}">${status}</span>`;
                });
                detailRuleStatusElement.innerHTML = statusHtml;
            }
        }
        
        // 获取当前选中的规则
        getSelectedRule() {
            return this.selectedRule;
        }
    }
    
    // 初始化RuleCard管理器
    new RuleCardManager();
    
    // 仿真配置管理器
    class SimulationConfigManager {
        constructor() {
            this.config = {
                name: '',
                seed: null,
                targetBatchId: '',
                policyId: '',
                events: {
                    nodeDown: { enabled: false, params: {} },
                    taskInsert: { enabled: false, params: {} },
                    subtaskRetry: { enabled: false, params: {} }
                }
            };
            this.batchData = this.initBatchData();
            this.policyData = this.initPolicyData();
            this.init();
        }
        
        init() {
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', () => {
                    this.initSelectors();
                    this.bindEvents();
                });
            } else {
                // DOM 已经加载完成，直接初始化
                this.initSelectors();
                this.bindEvents();
            }
        }
        
        initSelectors() {
            console.log('初始化选择器选项...');
            
            // 初始化批次选择器
            const batchSelect = document.getElementById('targetBatchSelect');
            if (batchSelect) {
                batchSelect.innerHTML = '<option value="">-- 选择目标批次 --</option>';
                Object.entries(this.batchData).forEach(([id, batch]) => {
                    const option = document.createElement('option');
                    option.value = id;
                    option.textContent = batch.name;
                    batchSelect.appendChild(option);
                });
                console.log('批次选择器初始化完成');
            }
            
            // 初始化策略选择器
            const policySelect = document.getElementById('policySelect');
            if (policySelect) {
                policySelect.innerHTML = '<option value="">-- 选择调度策略 --</option>';
                Object.entries(this.policyData).forEach(([id, policy]) => {
                    const option = document.createElement('option');
                    option.value = id;
                    option.textContent = `${policy.name} (${policy.category})`;
                    policySelect.appendChild(option);
                });
                console.log('策略选择器初始化完成');
            }
        }
        
        initBatchData() {
            return {
                'target-batch-001': {
                    name: '目标批次 001',
                    taskCount: 10,
                    types: ['LCD ITO工艺窗口 × 6', '模组AOI参数整定 × 4'],
                    estimatedSubtasks: 216
                },
                'target-batch-002': {
                    name: '目标批次 002',
                    taskCount: 10,
                    types: ['LED 外延MOCVD窗口 × 5', 'MiniLED回流焰 × 5'],
                    estimatedSubtasks: 350
                },
                'target-batch-003': {
                    name: '目标批次 003',
                    taskCount: 10,
                    types: ['LCD PI烘烤曲线 × 8', 'LCD ITO工艺窗口 × 2'],
                    estimatedSubtasks: 296
                }
            };
        }
        
        initPolicyData() {
            return {
                'DRL_1': {
                    name: '特征交叉注意机制',
                    category: 'DRL',
                    params: '神经网络: [64,256,128,12]\n注意力头: 8\nDropout: 0.1'
                },
                'DRL_2': {
                    name: '生成式策略网络',
                    category: 'DRL',
                    params: '神经网络: [64,256,128,12]\n生成维度: 256\nBeta参数: 0.5'
                },
                'DRL_3': {
                    name: '元学习训练机制',
                    category: 'DRL',
                    params: '神经网络: [64,256,128,12]\n元学习率: 0.001\n适应步数: 5'
                },
                'HR_0': {
                    name: '最短总处理时间优先',
                    category: 'Heuristic',
                    params: '权重: [0.6, 0.4]\n阈值: 100ms'
                },
                'HR_1': {
                    name: 'CPU空闲率最高优先',
                    category: 'Heuristic', 
                    params: 'CPU阈值: 80%\n平衡因子: 1.2'
                },
                'HR_2': {
                    name: '内存空闲率最高优先',
                    category: 'Heuristic',
                    params: '内存阈值: 85%\n平衡因子: 1.1'
                },
                'HR_3': {
                    name: '最短执行时间优先',
                    category: 'Heuristic',
                    params: '排序方式: 升序\n预测窗口: 5min'
                },
                'HR_4': {
                    name: '最小传输时间优先',
                    category: 'Heuristic',
                    params: '带宽阈值: 100Mbps\n距离权重: 0.8'
                },
                'HR_5': {
                    name: '随机最短计算时间',
                    category: 'Heuristic',
                    params: '采样规模: M=5\n时间权重: 1.0'
                },
                'HR_6': {
                    name: '随机CPU负载平衡',
                    category: 'Heuristic',
                    params: '采样规模: M=5\n方差阈值: 0.1'
                },
                'HR_7': {
                    name: '随机最短总时间',
                    category: 'Heuristic',
                    params: '采样规模: M=5\n时间权重: 1.0'
                },
                'HR_8': {
                    name: '随机最小时间方差',
                    category: 'Heuristic',
                    params: '采样规模: M=5\n方差阈值: 0.05'
                }
            };
        }
        
        bindEvents() {
            console.log('绑定仿真配置事件...');
            
            // 批次选择事件
            const batchSelect = document.getElementById('targetBatchSelect');
            if (batchSelect) {
                console.log('批次选择器元素找到，绑定事件');
                batchSelect.addEventListener('change', (e) => {
                    console.log('批次选择变化:', e.target.value);
                    this.updateBatchPreview(e.target.value);
                });
            } else {
                console.log('未找到批次选择器元素');
            }
            
            // 策略选择事件
            const policySelect = document.getElementById('policySelect');
            if (policySelect) {
                console.log('策略选择器元素找到，绑定事件');
                policySelect.addEventListener('change', (e) => {
                    console.log('策略选择变化:', e.target.value);
                    this.updatePolicyPreview(e.target.value);
                });
            } else {
                console.log('未找到策略选择器元素');
            }
            
            // 动态事件复选框事件
            const nodeDownCheck = document.getElementById('enableNodeDown');
            if (nodeDownCheck) {
                nodeDownCheck.addEventListener('change', (e) => {
                    this.toggleEventConfig('nodeDownConfig', e.target.checked);
                });
            }
            
            const taskInsertCheck = document.getElementById('enableTaskInsert');
            if (taskInsertCheck) {
                taskInsertCheck.addEventListener('change', (e) => {
                    this.toggleEventConfig('taskInsertConfig', e.target.checked);
                });
            }
            
            const subtaskInsertCheck = document.getElementById('enableSubtaskInsert');
            if (subtaskInsertCheck) {
                subtaskInsertCheck.addEventListener('change', (e) => {
                    this.toggleEventConfig('subtaskInsertConfig', e.target.checked);
                });
            }
            
            const subtaskRetryCheck = document.getElementById('enableSubtaskRetry');
            if (subtaskRetryCheck) {
                subtaskRetryCheck.addEventListener('change', (e) => {
                    this.toggleEventConfig('subtaskRetryConfig', e.target.checked);
                });
            }
            
            // 配置按钮事件
            const saveBtn = document.getElementById('saveConfigBtn');
            if (saveBtn) {
                saveBtn.addEventListener('click', () => this.saveConfig());
            }
            
            
            // 表单变化事件
            const configName = document.getElementById('configName');
            if (configName) {
                configName.addEventListener('input', () => this.updateConfigPreview());
            }
        }
        
        updateBatchPreview(batchId) {
            console.log('更新批次预览:', batchId);
            const preview = document.getElementById('batchPreview');
            const taskCount = document.getElementById('taskCount');
            const taskTypes = document.getElementById('taskTypes');
            const estimatedSubtasks = document.getElementById('estimatedSubtasks');
            
            console.log('预览元素:', preview, taskCount, taskTypes, estimatedSubtasks);
            
            if (!batchId) {
                if (preview) preview.classList.add('d-none');
                return;
            }
            
            const batch = this.batchData[batchId];
            console.log('批次数据:', batch);
            
            if (batch && preview && taskCount && taskTypes && estimatedSubtasks) {
                preview.classList.remove('d-none');
                taskCount.textContent = batch.taskCount;
                taskTypes.innerHTML = batch.types.map(type => 
                    `<div class="badge bg-secondary me-1 mb-1">${type}</div>`
                ).join('');
                estimatedSubtasks.textContent = batch.estimatedSubtasks;
                
                this.config.targetBatchId = batchId;
                this.updateConfigPreview();
                console.log('批次预览更新完成');
            } else {
                console.log('批次预览更新失败，缺少元素或数据');
            }
        }
        
        updatePolicyPreview(policyId) {
            console.log('更新策略预览:', policyId);
            const preview = document.getElementById('policyPreview');
            const params = document.getElementById('policyParams');
            
            console.log('策略预览元素:', preview, params);
            
            if (!policyId) {
                if (preview) preview.classList.add('d-none');
                return;
            }
            
            const policy = this.policyData[policyId];
            console.log('策略数据:', policy);
            
            if (policy && preview && params) {
                preview.classList.remove('d-none');
                params.innerHTML = `
                    <div class="small mb-2">
                        <strong>类型:</strong> 
                        <span class="badge ${policy.category === 'DRL' ? 'bg-success' : 'bg-info'}">
                            ${policy.category}
                        </span>
                    </div>
                    <div class="small">
                        <strong>参数:</strong><br>
                        <code style="white-space: pre-line;">${policy.params}</code>
                    </div>
                `;
                
                this.config.policyId = policyId;
                this.updateConfigPreview();
                console.log('策略预览更新完成');
            } else {
                console.log('策略预览更新失败，缺少元素或数据');
            }
        }
        
        toggleEventConfig(configId, enabled) {
            console.log('切换事件配置:', configId, enabled);
            const config = document.getElementById(configId);
            if (config) {
                if (enabled) {
                    config.classList.remove('d-none');
                    console.log('显示配置:', configId);
                } else {
                    config.classList.add('d-none');
                    console.log('隐藏配置:', configId);
                }
            } else {
                console.log('未找到配置元素:', configId);
            }
            this.updateConfigPreview();
        }
        
        updateConfigPreview() {
            const summary = document.getElementById('configSummary');
            const validation = document.getElementById('validationStatus');
            
            const name = document.getElementById('configName').value;
            const batch = this.config.targetBatchId;
            const policy = this.config.policyId;
            
            let summaryHtml = '';
            let isValid = true;
            let errors = [];
            
            if (name) {
                summaryHtml += `<div class="mb-1"><strong>配置名称:</strong> ${name}</div>`;
            } else {
                errors.push('配置名称未填写');
                isValid = false;
            }
            
            if (batch && this.batchData[batch]) {
                summaryHtml += `<div class="mb-1"><strong>目标批次:</strong> ${this.batchData[batch].name}</div>`;
            } else {
                errors.push('未选择目标批次');
                isValid = false;
            }
            
            if (policy && this.policyData[policy]) {
                summaryHtml += `<div class="mb-1"><strong>调度策略:</strong> ${this.policyData[policy].name}</div>`;
            } else {
                errors.push('未选择调度策略');
                isValid = false;
            }
            
            const seed = document.getElementById('randomSeed').value;
            if (seed) {
                summaryHtml += `<div class="mb-1"><strong>随机种子:</strong> ${seed}</div>`;
            }
            
            if (summaryHtml) {
                summary.innerHTML = summaryHtml;
            } else {
                summary.innerHTML = '<div class="text-muted">请填写必要信息后查看预览</div>';
            }
            
            // 更新验证状态
            if (isValid) {
                validation.innerHTML = '<div class="text-success"><i class="fas fa-check-circle me-1"></i>配置完成，可以保存或启动</div>';
            } else {
                validation.innerHTML = `
                    <div class="text-warning mb-2">
                        <i class="fas fa-exclamation-triangle me-1"></i>配置未完成
                    </div>
                    <div class="small">${errors.map(err => `• ${err}`).join('<br>')}</div>
                `;
            }
            
            // 更新按钮状态
            const saveBtn = document.getElementById('saveConfigBtn');
            if (saveBtn) saveBtn.disabled = !isValid;
        }
        
        saveConfig() {
            console.log('开始保存配置...');
            const name = document.getElementById('configName').value;
            const seed = document.getElementById('randomSeed').value || null;
            
            console.log('配置名称:', name, '随机种子:', seed);
            console.log('当前配置:', this.config);
            
            const config = {
                id: `cfg-${Date.now()}`,
                name: name,
                seed: seed ? parseInt(seed) : null,
                targetBatchId: this.config.targetBatchId,
                policyId: this.config.policyId,
                resourceSummary: {
                    computeNodes: { count: 11, cloudNodes: 1, edgeNodes: 10, totalCores: 176, totalMemGB: 1408 },
                    iotDevices: { total: 40, online: 38, offline: 2 },
                    licenses: { 
                        total: 33, used: 12, 
                        details: { "COMSOL": "1/3", "Fluent": "3/4", "ANSYS": "3/5", "TCAD": "0/3", "STACK": "2/6", "Lumerical": "1/2", "SimSoft": "1/4", "OptiSystem": "0/1", "Silvaco": "1/3" }
                    },
                    experts: { available: 6, total: 10 }
                },
                platformInfo: {
                    frontBuild: "web-v0.12",
                    os: "Windows 11 Professional",
                    host: "x86_64 32C/128G"
                },
                events: this.getEventConfig()
            };
            
            // 真正保存到历史配置列表
            config.createdAt = new Date().toLocaleString('zh-CN');
            this.addToHistoricalConfigs(config);
            
            console.log('保存配置:', config);
            this.showNotification('配置保存成功！', 'success');
        }
        
        addToHistoricalConfigs(config) {
            const container = document.getElementById('historicalConfigs');
            const policyName = this.policyData[config.policyId] ? this.policyData[config.policyId].name : '未知策略';
            const batchName = this.batchData[config.targetBatchId] ? this.batchData[config.targetBatchId].name : '未知批次';
            
            const configCard = document.createElement('div');
            configCard.className = 'col-md-6 mb-3';
            configCard.innerHTML = `
                <div class="card border-secondary">
                    <div class="card-header bg-light d-flex justify-content-between align-items-center">
                        <h6 class="mb-0">${config.name}</h6>
                        <span class="badge bg-secondary">已保存</span>
                    </div>
                    <div class="card-body p-3">
                        <div class="small mb-2">
                            <strong>配置 ID:</strong> ${config.id}
                        </div>
                        <div class="small mb-2">
                            <strong>目标批次:</strong> ${config.targetBatchId}
                        </div>
                        <div class="small mb-2">
                            <strong>调度策略:</strong> ${config.policyId} (${policyName})
                        </div>
                        <div class="small mb-2">
                            <strong>随机种子:</strong> ${config.seed || '随机'}
                        </div>
                        <div class="small text-muted mb-2">
                            创建时间: ${config.createdAt}
                        </div>
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-primary" onclick="loadHistoricalConfig('${config.id}')">
                                <i class="fas fa-upload me-1"></i>加载
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteHistoricalConfig('${config.id}')">
                                <i class="fas fa-trash me-1"></i>删除
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // 在列表顶部插入新配置
            container.insertBefore(configCard, container.firstChild);
            
            // 将配置数据存储在全局变量中供加载使用
            if (!window.savedConfigs) {
                window.savedConfigs = {};
            }
            window.savedConfigs[config.id] = config;
        }
        
        
        getEventConfig() {
            const events = [];
            
            // 节点下线事件
            if (document.getElementById('enableNodeDown').checked) {
                events.push({
                    type: 'node_down',
                    nodeScope: ['edge1', 'edge2', 'edge3'],
                    sigma: parseInt(document.getElementById('nodeDownSigma').value) || 3,
                    durationSec: {
                        dist: 'normal',
                        mean: parseInt(document.getElementById('downDurationMean').value) || 120,
                        std: parseInt(document.getElementById('downDurationStd').value) || 40
                    },
                    cooldownSec: 60
                });
            }
            
            // 任务插入事件
            if (document.getElementById('enableTaskInsert').checked) {
                events.push({
                    type: 'task_insert',
                    sigma: parseInt(document.getElementById('taskInsertSigma').value) || 3,
                    sizeHint: {
                        dist: 'normal',
                        mean: parseFloat(document.getElementById('taskSizeMean').value) || 2.0,
                        std: parseFloat(document.getElementById('taskSizeStd').value) || 0.7
                    }
                });
            }
            
            // 子任务插入事件
            if (document.getElementById('enableSubtaskInsert').checked) {
                events.push({
                    type: 'subtask_insert',
                    sigma: parseInt(document.getElementById('subtaskInsertSigma').value) || 3,
                    fanout: {
                        dist: 'normal',
                        mean: parseFloat(document.getElementById('fanoutMean').value) || 3.0,
                        std: parseFloat(document.getElementById('fanoutStd').value) || 1.0
                    }
                });
            }
            
            // 子任务重试事件
            if (document.getElementById('enableSubtaskRetry').checked) {
                events.push({
                    type: 'subtask_retry',
                    sigma: parseInt(document.getElementById('subtaskRetrySigma').value) || 3,
                    probPerExec: {
                        dist: 'normal',
                        mean: parseFloat(document.getElementById('retryProbMean').value) || 0.05,
                        std: parseFloat(document.getElementById('retryProbStd').value) || 0.02
                    }
                });
            }
            
            return events;
        }
        
        showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification && notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }
    }
    
    // 初始化仿真配置管理器
    new SimulationConfigManager();
    
    // 全局函数处理历史配置
    function loadHistoricalConfig(configId) {
        console.log('加载历史配置:', configId);
        
        // 初始化全局配置存储
        if (!window.savedConfigs) {
            window.savedConfigs = {
                'cfg-20250824-001': {
                    name: 'LCD-ITO-窗口-DRL-交叉注意',
                    seed: 12345,
                    targetBatchId: 'target-batch-002',
                    policyId: 'DRL_1'
                },
                'cfg-20250824-002': {
                    name: 'LED-MOCVD-启发式-最短时间',
                    seed: 54321,
                    targetBatchId: 'target-batch-002',
                    policyId: 'HR_0'
                },
                'cfg-20250825-003': {
                    name: 'LCD-PI-烘烤-DRL-生成式',
                    seed: 99999,
                    targetBatchId: 'target-batch-003',
                    policyId: 'DRL_2'
                }
            };
        }
        
        const config = window.savedConfigs[configId];
        if (config) {
            // 填充表单
            document.getElementById('configName').value = config.name;
            document.getElementById('randomSeed').value = config.seed;
            document.getElementById('targetBatchSelect').value = config.targetBatchId;
            document.getElementById('policySelect').value = config.policyId;
            
            // 触发更新事件
            document.getElementById('targetBatchSelect').dispatchEvent(new Event('change'));
            document.getElementById('policySelect').dispatchEvent(new Event('change'));
            document.getElementById('configName').dispatchEvent(new Event('input'));
            
            showNotification('配置加载成功！', 'success');
        }
    }
    
    function deleteHistoricalConfig(configId) {
        if (confirm('确认删除这个配置吗？')) {
            // 查找并删除相应的配置卡片
            const configCards = document.querySelectorAll('#historicalConfigs .card');
            configCards.forEach(card => {
                const buttons = card.querySelectorAll('button[onclick*="' + configId + '"]');
                if (buttons.length > 0) {
                    card.parentElement.remove(); // 删除整个col元素
                }
            });
            
            console.log('删除配置:', configId);
            showNotification('配置已删除', 'success');
        }
    }
    
    function executeConfig(configId) {
        console.log('执行配置:', configId);
        showNotification('正在执行配置...请稍后查看仿真运行页面', 'info');
        
        // 跳转到仿真运行页面
        setTimeout(() => {
            showPage('simulation-page');
        }, 2000);
    }
    
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
        notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
        notification.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            if (notification && notification.parentNode) {
                notification.remove();
            }
        }, 3000);
    }
    </script>
</body>
</html>
